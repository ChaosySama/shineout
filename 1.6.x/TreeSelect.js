(window.webpackJsonpShineoutDoc=window.webpackJsonpShineoutDoc||[]).push([[52],{1124:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(547),r=n(548),d=n(35),o=n(1125),s=n.n(o),c=n(1126),u=n.n(c),h=Object(d.b)(s.a,u.a),p=[{name:"01-base",title:Object(d.b)("基本用法 \n 基础的TreeSelect用法。","Base \n Basic usage of TreeSelect."),component:n(1127).default,rawText:n(1128)},{name:"02-mutiple",title:Object(d.b)("多选 \n 通过设置 multiple 来实现多选。","Multiple \n Set multiple to Multiple choices."),component:n(1129).default,rawText:n(1130)},{name:"03-filter",title:Object(d.b)("筛选 \n onFilter 返回函数时，使用这个函数做前端过滤。","Filter \n OnFilter is a function to filter data."),component:n(1131).default,rawText:n(1132)},{name:"04-disabled",title:Object(d.b)("禁用 \n 设置 disabled 禁用选项","Disabled \n Set disabled to disabled item."),component:n(1133).default,rawText:n(1134)},{name:"05-loader",title:Object(d.b)("动态加载 \n 数据过大，需要动态加载时，可以设置 loader 函数，当展开未定义 children（undefined）的节点时，触发此函数。","Lazy load \n Set the loader function to dynamic fetch data. This function is triggered when the undefined child node is expanded."),component:n(1135).default,rawText:n(1136)}];t.default=Object(l.a)(function(e){return i.a.createElement(r.b,Object.assign({},e,{codes:void 0,source:h,examples:p}))})},1125:function(e,t){e.exports="# TreeSelect *树选择*\n\nTreeSelect 用来选择树形数据结构，若需要非关联树形结构选择可使用 [Select(treeData)](/components/Select)\n\n<example />\n\n## API\n\n| 属性 | 类型 | 默认值 | 说明 |\n| --- | --- | --- | --- |\n| width | number | 无 | 宽度 |\n| clearable | boolean | false | 是否可清除值 |\n| multiple | boolean | false | 是否是多选 |\n| data | any[] | [] | 数据，子节点为children，如果 children 值为 null 或 长度为 0 时，视为叶子节点 |\n| value | string \\| string[] | 无 | 选中的 key （受控），多选时必须为array |\n| defaultValue | string \\| string[] | 无 | 初始值，多选时必须为array |\n| defaultExpanded | string[] | 无 | 默认展开的节点 key（非受控） |\n| disabled | (data: object) => boolean \\| boolean | false | 为 true 时，所有节点禁用选择，为函数时，根据函数返回结果确定是否禁用 |\n| filterDelay | number | 400 | 毫秒。用户输入触发 fitler 事件的延时 |\n| name | string | 无 | Form 存取数据的名称 |\n| keygen | （(data: object) => string） \\| string \\| true | 必填 | 生成每一项key的辅助方法<br />为 true 时，以数据项本身作为key，相当于 (d => d)<br />为函数时，使用此函数返回值<br />为string时，使用这个string对应的数据值。如 'id'，相当于 (d => d.id) |\n| expanded | string[] | 无 | 展开的节点 key （受控） |\n| loader | (key: string) => void | 无 | 设置loader属性后，未定义children的节点视为动态加载节点，点击展开触发 loader事件，children 为 null 或者长度为 0 视为叶子节点 |\n| mode | 0 \\| 1 \\| 2 \\| 3 | 1 | 选中值模式<br />0: 只返回完全选中的节点，包含父节点<br />1: 返回全部选中的节点和半选中的父节点<br />2: 只返回选中的子节点<br />3: 如果父节点选中，只返回父节点 |\n| onExpand | (expanded: string[]) => void | 无 | 节点展开回调，参数为当前展开节点 key 数组 |\n| onChange | (value: string[]) => void | 无 | 参数 为 当前选中值 |\n| onFilter | (text: string) => (data: any) => boolean | 无 | onFilter 不为空时，可以输入过滤数据<br />onFilter 如果返回一个函数，使用这个函数做前端过滤<br />如果不返回，可以自行做后端过滤 |\n| renderItem | (data: object) => ReactNode | 必填 | 为 string 时，返回 d\\[string]<br />为 function 时，返回函数结果 |\n| renderResult | (data: object) => ReactNode | renderItem | 选中后在结果中显示的内容，默认和 renderItem 相同 |\n| compressed | boolean | false | 将选中值合并，只在多选模式下有效；为'no-repeat'时第一个值不会出现在弹出框中。 |\n| absolute | boolean | false | 为 true 时，选项弹出层在 DOM 中独立 render |\n| zIndex | number | 1000 | 选项列表 z-index 值 |\n| childrenKey | string | 'children' | 指定子数据的属性名 | \n| defaultExpandAll | boolean | false | 默认全部展开节点 | \n| showHitDescendants | boolean | false | 筛选后是否展示命中节点的后代节点 |\n| renderUnmatched | (data: any) => ReactNode | 无 | \b渲染未匹配值的方式\b |\n| onCollapse | (collapse: boolean) => void | 无 | 下拉列表展开/收起回调 |\n| rules | any[] | 无 | 校验规则 |\n| unmatch | boolean | 无 | 是否展示data中不存在的值 |\n"},1126:function(e,t){e.exports="# TreeSelect\n\n<example />\n\n## API\n\n| Property | Type | Default | Description |\n| --- | --- | --- | --- |\n| width | number | null | width |\n| clearable | boolean | false | If clearable is true, show clear value icon |\n| multiple | boolean | false | if it is true, it will be multiple selection |\n| data | any[] | [] | data. The child node is children. If the children value is null or its length is 0, it is render as a leaf node. |\n| value | string \\| string[] | | In the Form, the value will be taken over by the form and the value will be invalid. |\n| defaultValue | string \\| string[] | | Initial value |\n| defaultExpanded | string[] | - | Default expanded node key. |\n| disabled | (data: object) => boolean \\| boolean | false | When it is true, all nodes disable the selection; when it is a function, it determines whether it is disabled according to the return result of the function. |\n| filterDelay | number | 400 | ms. The delay of user input triggering filter events |\n| name | string | - | The name of a Form that accesses data |\n| keygen | ((data: object) => string) \\| string \\| true | index | Generate a auxiliary method for each key<br />If not filled, index will be used(not recommended,there may be problems with more than 10 data)<br />When it is a function, use its return value.<br />When it is a string，ues the value of the string.For example, 'id' is the same thing as (d) => d.id. |\n| expanded | string[] | - | Expanded node key (controlled) |\n| loader | (key: string) => void | - | If the loader attribute is a function, the node with no children is regarded as dynamically loaded node. Click expanded button to trigger the loader event. The children property is null or its length is 0 will be regarded as a leaf node. |\n| mode | 0 \\| 1 \\| 2 \\| 3 | 1 | mode <br />0: Returns only the fully selected node including the parent node. <br />1: Returns all selected nodes and semi-selected nodes. <br />2: Return only the selected child nodes. <br />3: If the parent node is full selected, only return the parent node. |\n| onExpand | (expanded: string[]) => void | - | The callback function for expanding the node. The parameter is the key array of the currently expanded nodes. |\n| onChange | (value: string[]) => void | - | value is your picker now |\n| onFilter | (text: string) => (data: any) => boolean | - | When the onFilter is not empty, you can filter data by input.<br />If the onFilter returns a function, use this function as a front-end filter.<br />If return undefined, you can do your own backend filtering. |\n| renderItem | (data: object) => ReactNode | required | When it is a string, return d\\[string]<br />When it is a function, return the result of the function. |\n| renderResult | (data: object) => ReactNode | renderItem | The content displayed in the result after selecting, if not set, use renderItem |\n| compressed | boolean \\| 'no-repeat' | false | Merges selected values, valid only in multiselect mode; the first value will not appear in the Popover when it is'no-repeat'. |\n| absolute | boolean | false | When it is true, the pop-up layer of option append into document.body. |\n| zIndex | number | 1000 | options z-index |\n| childrenKey | string | 'children' | the key of the children data name | \n| defaultExpandAll | boolean | false | default expand all node |\n| showHitDescendants | boolean | false | Whether to show the descendant nodes of the hit node after filtering |\n| renderUnmatched | (data: any) => ReactNode | none | render unmatched value |\n| onCollapse | (collapse: boolean) => void | none | option collapse callback |\n| rules | any[] | null | Validation rules |\n| unmatch | boolean | none | render unmatch value |\n"},1127:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var a=n(5),i=n(6),l=n(7),r=n(4),d=n(8),o=n(0),s=n.n(o),c=n(311),u=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]}],h=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(l.a)(this,Object(r.a)(n).call(this,e))).handleChange=function(e){t.setState({value:e})},t.state={value:""},t}return Object(d.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement(c.a,{value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:u})}}]),n}(s.a.Component)},1128:function(e,t){e.exports="/**\n * cn - 基本用法\n *    -- 基础的TreeSelect用法。\n * en - Base\n *    -- Basic usage of TreeSelect.\n */\nimport React from 'react'\nimport { TreeSelect } from 'shineout'\n\nconst data = [\n  {\n    id: '1',\n    title: '1',\n    children: [\n      { id: '1-1', title: '1-1', children: [{ id: '1-1-1', title: '1-1-1' }, { id: '1-1-2', title: '1-1-2' }] },\n      { id: '1-2', title: '1-2' },\n    ],\n  },\n  { id: '2', title: '2', children: [{ id: '2-1', title: '2-1' }, { id: '2-2', title: '2-2' }] },\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\n]\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: '',\n    }\n  }\n\n  handleChange = v => {\n    this.setState({\n      value: v,\n    })\n  }\n\n  render() {\n    return (\n      <TreeSelect\n        value={this.state.value}\n        onChange={this.handleChange}\n        clearable\n        style={{ width: 250 }}\n        keygen=\"id\"\n        renderItem={node => `node ${node.title}`}\n        data={data}\n      />\n    )\n  }\n}\n"},1129:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var a=n(5),i=n(6),l=n(7),r=n(4),d=n(8),o=n(0),s=n.n(o),c=n(311),u=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]}],h=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(l.a)(this,Object(r.a)(n).call(this,e))).handleChange=function(e){t.setState({value:e})},t.state={value:[]},t}return Object(d.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(c.a,{multiple:!0,value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250,marginBottom:15},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:u}),s.a.createElement("br",null),s.a.createElement(c.a,{compressed:!0,multiple:!0,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:u}))}}]),n}(s.a.Component)},1130:function(e,t){e.exports="/**\n * cn - 多选\n *    -- 通过设置 multiple 来实现多选。\n * en - Multiple\n *    -- Set multiple to Multiple choices.\n */\nimport React from 'react'\nimport { TreeSelect } from 'shineout'\n\nconst data = [\n  {\n    id: '1',\n    title: '1',\n    children: [\n      { id: '1-1', title: '1-1', children: [{ id: '1-1-1', title: '1-1-1' }, { id: '1-1-2', title: '1-1-2' }] },\n      { id: '1-2', title: '1-2' },\n    ],\n  },\n  { id: '2', title: '2', children: [{ id: '2-1', title: '2-1' }, { id: '2-2', title: '2-2' }] },\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\n]\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: [],\n    }\n  }\n\n  handleChange = v => {\n    this.setState({\n      value: v,\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <TreeSelect\n          multiple\n          value={this.state.value}\n          onChange={this.handleChange}\n          clearable\n          style={{ width: 250, marginBottom: 15 }}\n          keygen=\"id\"\n          renderItem={node => `node ${node.title}`}\n          data={data}\n        />\n        <br />\n        <TreeSelect\n          compressed\n          multiple\n          clearable\n          style={{ width: 250 }}\n          keygen=\"id\"\n          renderItem={node => `node ${node.title}`}\n          data={data}\n        />\n      </div>\n    )\n  }\n}\n"},1131:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var a=n(28),i=n(5),l=n(6),r=n(7),d=n(4),o=n(8),s=n(1),c=n(0),u=n.n(c),h=n(311),p=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]},{id:"4",title:"4",children:[{id:"4-1",title:"4-1"}]},{id:"5",title:"5",children:[{id:"5-1",title:"5-1"}]}],m=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(r.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){n.setState(Object(a.a)({},e,t))},n.handleFilter=function(t){return function(e){return-1<e.title.indexOf(t)}},n.state={single:"",multiple:[]},n.handleChangeSingle=n.handleChange.bind(Object(s.a)(Object(s.a)(n)),"single"),n.handleChangeMultiple=n.handleChange.bind(Object(s.a)(Object(s.a)(n)),"multiple"),n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(h.a,{onFilter:this.handleFilter,value:this.state.single,onChange:this.handleChangeSingle,clearable:!0,style:{width:250,marginBottom:20},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:p}),u.a.createElement("br",null),u.a.createElement(h.a,{multiple:!0,onFilter:this.handleFilter,value:this.state.multiple,onChange:this.handleChangeMultiple,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:p}))}}]),t}(u.a.Component)},1132:function(e,t){e.exports="/**\n * cn - 筛选\n *    -- onFilter 返回函数时，使用这个函数做前端过滤。\n * en - Filter\n *    -- OnFilter is a function to filter data.\n */\nimport React from 'react'\nimport { TreeSelect } from 'shineout'\n\nconst data = [\n  {\n    id: '1',\n    title: '1',\n    children: [\n      { id: '1-1', title: '1-1', children: [{ id: '1-1-1', title: '1-1-1' }, { id: '1-1-2', title: '1-1-2' }] },\n      { id: '1-2', title: '1-2' },\n    ],\n  },\n  { id: '2', title: '2', children: [{ id: '2-1', title: '2-1' }, { id: '2-2', title: '2-2' }] },\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\n  { id: '4', title: '4', children: [{ id: '4-1', title: '4-1' }] },\n  { id: '5', title: '5', children: [{ id: '5-1', title: '5-1' }] },\n]\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      single: '',\n      multiple: [],\n    }\n\n    this.handleChangeSingle = this.handleChange.bind(this, 'single')\n    this.handleChangeMultiple = this.handleChange.bind(this, 'multiple')\n  }\n\n  handleChange = (key, v) => {\n    this.setState({\n      [key]: v,\n    })\n  }\n\n  handleFilter = text => d => d.title.indexOf(text) > -1\n\n  render() {\n    return (\n      <div>\n        <TreeSelect\n          onFilter={this.handleFilter}\n          value={this.state.single}\n          onChange={this.handleChangeSingle}\n          clearable\n          style={{ width: 250, marginBottom: 20 }}\n          keygen=\"id\"\n          renderItem={node => `node ${node.title}`}\n          data={data}\n        />\n        <br />\n        <TreeSelect\n          multiple\n          onFilter={this.handleFilter}\n          value={this.state.multiple}\n          onChange={this.handleChangeMultiple}\n          clearable\n          style={{ width: 250 }}\n          keygen=\"id\"\n          renderItem={node => `node ${node.title}`}\n          data={data}\n        />\n      </div>\n    )\n  }\n}\n"},1133:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var a=n(5),i=n(6),l=n(7),r=n(4),d=n(8),o=n(0),s=n.n(o),c=n(311),u=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"},{id:"3-2",title:"3-2"}]}],h=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(l.a)(this,Object(r.a)(n).call(this,e))).handleChange=function(e){t.setState({value:e})},t.state={value:""},t}return Object(d.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement(c.a,{absolute:!0,disabled:function(e){return e.title.startsWith("2-")},value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:u})}}]),n}(s.a.Component)},1134:function(e,t){e.exports="/**\n * cn - 禁用\n *    -- 设置 disabled 禁用选项\n * en - Disabled\n *    -- Set disabled to disabled item.\n */\nimport React from 'react'\nimport { TreeSelect } from 'shineout'\n\nconst data = [\n  {\n    id: '1',\n    title: '1',\n    children: [\n      { id: '1-1', title: '1-1', children: [{ id: '1-1-1', title: '1-1-1' }, { id: '1-1-2', title: '1-1-2' }] },\n      { id: '1-2', title: '1-2' },\n    ],\n  },\n  { id: '2', title: '2', children: [{ id: '2-1', title: '2-1' }, { id: '2-2', title: '2-2' }] },\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }, { id: '3-2', title: '3-2' }] },\n]\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: '',\n    }\n  }\n\n  handleChange = v => {\n    this.setState({\n      value: v,\n    })\n  }\n\n  render() {\n    return (\n      <TreeSelect\n        absolute\n        disabled={v => v.title.startsWith('2-')}\n        value={this.state.value}\n        onChange={this.handleChange}\n        clearable\n        style={{ width: 250 }}\n        keygen=\"id\"\n        renderItem={node => `node ${node.title}`}\n        data={data}\n      />\n    )\n  }\n}\n"},1135:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var a=n(5),i=n(6),l=n(7),r=n(4),d=n(8),o=n(0),s=n.n(o),c=n(46),u=n(311),h=["0","1","2","3","4"].map(function(e){return{id:e}}),p=0,m=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(r.a)(t).call(this,e))).loader=function(t){setTimeout(function(){n.setState(Object(c.a)(function(e){e.data[parseInt(t,10)].children=Array(6).fill(0).map(function(){return{id:"-".concat(p++),children:[]}})}))},500)},n.handleChange=function(e){return n.setState({value:e})},n.renderItem=function(e){return"node ".concat(e.id)},n.state={data:h,value:[]},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(u.a,{multiple:!0,loader:this.loader,value:this.state.value,onChange:this.handleChange,keygen:"id",renderItem:this.renderItem,data:this.state.data})}}]),t}(o.Component)},1136:function(e,t){e.exports="/**\n * cn - 动态加载\n *    -- 数据过大，需要动态加载时，可以设置 loader 函数，当展开未定义 children（undefined）的节点时，触发此函数。\n * en - Lazy load\n *    -- Set the loader function to dynamic fetch data. This function is triggered when the undefined child node is expanded.\n */\nimport React, { Component } from 'react'\nimport immer from 'immer'\nimport { TreeSelect } from 'shineout'\n\nconst initData = ['0', '1', '2', '3', '4'].map(i => ({ id: i }))\n\nlet index = 0\nexport default class extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { data: initData, value: [] }\n  }\n\n  loader = key => {\n    setTimeout(() => {\n      this.setState(\n        immer(draft => {\n          const { data } = draft\n          data[parseInt(key, 10)].children = Array(6)\n            .fill(0)\n            .map(() => ({ id: `-${index++}`, children: [] }))\n        })\n      )\n    }, 500)\n  }\n\n  handleChange = value => this.setState({ value })\n\n  renderItem = node => `node ${node.id}`\n\n  render() {\n    return (\n      <TreeSelect\n        multiple\n        loader={this.loader}\n        value={this.state.value}\n        onChange={this.handleChange}\n        keygen=\"id\"\n        renderItem={this.renderItem}\n        data={this.state.data}\n      />\n    )\n  }\n}\n"},311:function(e,t,n){"use strict";var a=n(50),i=n(19),l=n(67),m=n(2),r=n(5),d=n(6),o=n(7),s=n(25),c=n(4),u=n(8),h=n(1),b=n(13),p=n(0),f=n.n(p),v=n(126),g=n(18),y=n(20),O=n(23),j=n(85),k=n(15),C=n.n(k),x=n(10),I=n(30),E=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).bindElement=t.bindElement.bind(Object(h.a)(Object(h.a)(t))),t.handleInput=t.handleInput.bind(Object(h.a)(Object(h.a)(t))),t.props.setInputReset(t.reset.bind(Object(h.a)(Object(h.a)(t)))),t}return Object(u.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.focus&&this.focus()}},{key:"shouldComponentUpdate",value:function(){return this.props.updatAble}},{key:"componentDidUpdate",value:function(e){this.props.focus!==e.focus&&this.props.focus&&this.focus()}},{key:"reset",value:function(){this.editElement&&(this.editElement.innerText=""),this.blurTimer&&clearTimeout(this.blurTimer)}},{key:"focus",value:function(){I.focusElement.select(this.editElement)}},{key:"bindElement",value:function(e){this.editElement=e}},{key:"handleInput",value:function(e){this.props.onFilter(e.target.innerText.replace("\feff ","").trim())}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.focus,a=e.multiple,i="string"==typeof t?t.replace(/<\/?[^>]*>/g,""):t;return Object(p.isValidElement)(i)?Object(p.cloneElement)(i,{className:Object(m.N)("input"),ref:this.bindElement,key:"input",onInput:this.handleInput,contentEditable:n}):f.a.createElement("span",{key:"input",className:Object(m.N)("input",!a&&"full"),ref:this.bindElement,contentEditable:n,onInput:this.handleInput,onBlur:this.handleBlur,dangerouslySetInnerHTML:{__html:i}})}}]),n}(p.Component);E.defaultProps={text:"",updatAble:!1};var w=E,S=n(108),T=n(178),F=function(e,t,n){return Object(x.isObject)(e)&&e.IS_NOT_MATCHED_VALUE?"function"==typeof n?n(e.value):Object(x.isObject)(e.value)?t(e.value):e.value:t(e)};function N(e){var t=e.content,n=e.data,a=e.disabled,i=e.onClick,l=n,r=a||!i?void 0:function(){return i(l)},d=a||!r;return f.a.createElement("a",{tabIndex:-1,className:Object(m.N)("item",a&&"disabled",d&&"ban")},t,!d&&f.a.createElement("span",{className:Object(m.N)("indicator","close"),onClick:r}))}var R=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).state={more:!1},t.handleRemove=t.handleRemove.bind(Object(h.a)(Object(h.a)(t))),t.handelMore=t.handelMore.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(n,e),Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.result;e.compressed&&t.length<=1&&(this.state.more=!1)}},{key:"handleRemove",value:function(){this.props.onRemove.apply(void 0,arguments)}},{key:"handelMore",value:function(e){this.setState({more:e})}},{key:"renderClear",value:function(){var e=this.props,t=e.onClear,n=e.result,a=e.disabled;return t&&0<n.length&&!0!==a?f.a.createElement("a",{tabIndex:-1,"data-role":"close",className:Object(m.N)("indicator","close"),onClick:t}):null}},{key:"renderInput",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"input",n=this.props,a=n.multiple,i=n.onFilter,l=n.focus,r=n.setInputReset;return f.a.createElement(w,{key:"".concat(t,".").concat(l?1:0),updatAble:!a,multiple:a,focus:l,text:e,onFilter:i,setInputReset:r})}},{key:"renderItem",value:function(e,t,n){var a=this.props,i=a.renderResult,l=a.renderUnmatched,r=a.datum,d=F(e,i,l);return null===d?null:f.a.createElement(N,{key:n,content:d,data:e,disabled:r.disabled(e),onClick:t?this.handleRemove:void 0})}},{key:"renderMore",value:function(e){var t=this.props.compressed,n=Object(j.a)(e),a=n[0],i=n.slice(1);return[a,f.a.createElement(T.a,{key:"more",className:Object(m.N)("item","item-compressed"),popoverClassName:Object(m.N)("popover"),contentClassName:Object(m.N)("result"),compressed:t,data:[f.a.cloneElement(a,{onClick:this.handleRemove})].concat(Object(O.a)(i)),cls:m.N})]}},{key:"renderPlaceholder",value:function(){var e=this.props,t=e.focus,n=e.onFilter;return t&&n?this.renderInput(" "):f.a.createElement("span",{className:C()(Object(m.r)("placeholder"),Object(m.N)("ellipsis"))},this.props.placeholder," ")}},{key:"renderResult",value:function(){var n=this,e=this.props,t=e.multiple,a=e.compressed,i=e.result,l=e.renderResult,r=e.renderUnmatched,d=e.onFilter,o=e.focus,s=e.filterText;if(t){var c=i.map(function(e,t){return n.renderItem(e,0===t&&i.length<=1||!a||0<t,t)}).filter(function(e){return!Object(x.isEmpty)(e)});return a&&1<i.length&&(c=this.renderMore(c)),o&&d&&c.push(this.renderInput(s,i.length)),c}return d?this.renderInput(F(i[0],l,r)):f.a.createElement("span",{className:Object(m.N)("ellipsis")},F(i[0],l,r))}},{key:"render",value:function(){var e=0===this.props.result.length?this.renderPlaceholder():this.renderResult(),t=this.props.compressed;return f.a.createElement("div",{className:Object(m.N)("result",t&&"compressed")},e,!this.props.multiple&&f.a.createElement("a",{tabIndex:-1,className:Object(m.N)("indicator","caret")},f.a.createElement(S.a,null)),this.renderClear())}}]),n}(p.PureComponent),D=n(80),A=n(24),B=n(56),M=n(32),V=n(14),U=Object(B.a)(["fade","scale-y"],"fast"),K=Object(D.a)(function(e){var t=e.focus,n=Object(b.a)(e,["focus"]);return f.a.createElement(U,Object.assign({show:t},n))}),P=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).state={focus:!1,position:"drop-down"},t.treeSelectId="treeSelect_".concat(Object(y.c)()),t.setInputReset=t.setInputReset.bind(Object(h.a)(Object(h.a)(t))),t.renderActive=t.renderActive.bind(Object(h.a)(Object(h.a)(t))),t.handleChange=t.handleChange.bind(Object(h.a)(Object(h.a)(t))),t.renderItem=t.renderItem.bind(Object(h.a)(Object(h.a)(t))),t.bindElement=t.bindElement.bind(Object(h.a)(Object(h.a)(t))),t.handleClick=t.handleState.bind(Object(h.a)(Object(h.a)(t)),!0),t.handleFocus=t.handleFocus.bind(Object(h.a)(Object(h.a)(t))),t.handleKeyDown=t.handleKeyDown.bind(Object(h.a)(Object(h.a)(t))),t.handleBlur=t.handleState.bind(Object(h.a)(Object(h.a)(t)),!1),t.handleClear=t.handleClear.bind(Object(h.a)(Object(h.a)(t))),t.handleRemove=t.handleRemove.bind(Object(h.a)(Object(h.a)(t))),t.handleClickAway=t.handleClickAway.bind(Object(h.a)(Object(h.a)(t))),t.shouldFocus=t.shouldFocus.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(n,e),Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.onFilter,i=n.datum,l=n.mode;i.mode=l,t.focus!==this.state.focus&&!this.state.focus&&a&&setTimeout(function(){a("")},400)}},{key:"componentWillUnmount",value:function(){Object(s.a)(Object(c.a)(n.prototype),"componentWillUnmount",this).call(this),this.clearClickAway()}},{key:"getValue",value:function(){var e=this.props,t=e.datum,n=e.multiple,a=t.getValue();return n?a:a.length?a[0]:""}},{key:"getText",value:function(e){return this.props.empty||Object(M.a)(e)}},{key:"setInputReset",value:function(e){this.inputReset=e}},{key:"bindElement",value:function(e){this.element=e}},{key:"shouldFocus",value:function(e){return e.getAttribute("data-id")===this.treeSelectId||!!Object(I.getParent)(e,".".concat(Object(m.N)("result")))}},{key:"bindClickAway",value:function(){document.addEventListener("mousedown",this.handleClickAway)}},{key:"clearClickAway",value:function(){document.removeEventListener("mousedown",this.handleClickAway)}},{key:"handleClickAway",value:function(e){(function e(t,n){return t.getAttribute("data-id")===n||!!t.parentElement&&e(t.parentElement,n)})(e.target,this.treeSelectId)||(this.clearClickAway(),this.props.onBlur(),this.handleState(!1,e))}},{key:"handleState",value:function(e,t){if(!0!==this.props.disabled&&e!==this.state.focus&&!(e&&t&&t.target.classList.contains(Object(m.N)("close")))){var n=this.props,a=n.height,i=n.onCollapse,l=this.props.position;A.docSize.height<a+this.element.getBoundingClientRect().bottom&&!l&&(l="drop-up"),i&&i(e),this.setState({focus:e,position:l||"drop-down"}),e&&this.bindClickAway()}}},{key:"handleFocus",value:function(e){this.shouldFocus(e.target)&&(this.props.onFocus(e),this.bindClickAway())}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&(e.preventDefault(),this.state.focus||this.handleState(!0)),9===e.keyCode&&(this.props.onBlur(),this.state.focus?this.handleState(!1,e,!0):this.clearClickAway())}},{key:"handleRemove",value:function(e){var t=this.props.datum;t.set(t.getKey(e),0),this.handleChange()}},{key:"handleChange",value:function(e,t){var n=this.props,a=n.datum,i=n.multiple,l=n.disabled,r=n.onChange;if(!0!==l&&!a.isDisabled(t)){var d=a.getDataById(t);i||(a.setValue([]),a.set(a.getKey(e),1),this.handleState(!1)),r(this.getValue(),d,t&&a.getPath(t).path)}}},{key:"handleClear",value:function(){var e=this.props.multiple;this.props.datum.setValue([]),this.props.onChange(e?[]:""),this.handleState(!1),this.element.focus()}},{key:"renderItem",value:function(e,t){var n=this.props.renderItem;return"function"==typeof n?n(e,t):e[n]}},{key:"renderActive",value:function(e,t,n,a){var i=this.props,l=i.renderItem,r=i.datum,d="function"==typeof l?l(e,t,n,a):e[l];return f.a.createElement("span",{title:"string"==typeof d?d:void 0,className:Object(m.N)("content-wrapper",n&&"selected",r.isDisabled(r.getKey(e))&&"disabled")},d)}},{key:"renderTreeOptions",value:function(){var t=this,e=this.state,n=e.focus,a=e.position,i=this.props,l=i.multiple,r=i.datum,d=i.data,o=i.absolute,s=i.height,c=i.zIndex,u={};["mode","data","datum","defaultExpanded","defaultExpandAll","disabled","expanded","keygen","loader","onExpand","renderItem","line","parentClickExpand","childrenKey"].forEach(function(e){u[e]=t.props[e]}),u.value=r.getValue(),l?u.onChange=this.handleChange:(u.onClick=this.handleChange,u.renderItem=this.renderActive,u.active=u.value.length?u.value[0]:null);var h=0===d.length?f.a.createElement("span",{className:Object(m.N)("option")},this.getText("noData")):f.a.createElement(v.a,Object.assign({className:Object(m.N)(!l&&"single")},u,{dataUpdate:!1}));return f.a.createElement(K,{absolute:o,rootClass:Object(m.N)(a,Object(V.b)()&&"rtl"),parentElement:this.element,position:a,focus:n,"data-id":this.treeSelectId,className:Object(m.N)("options"),style:{maxHeight:s,overflowY:"auto"},fixed:"min",zIndex:c},f.a.createElement("div",{className:Object(m.N)("tree-wrapper")},h))}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.onFilter,a=e.compressed,i=e.multiple,l=e.datum,r=e.clearable,d=e.disabled,o=e.size,s=e.filterText,c=e.result,u=e.renderUnmatched,h=Object(m.N)("inner",o,this.state.focus&&"focus",this.state.position,i&&"multiple",!0===d&&"disabled"),p=this.props.renderResult||this.renderItem;return f.a.createElement("div",{tabIndex:!0===d?-1:0,ref:this.bindElement,className:h,"data-id":this.treeSelectId,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onClick:this.handleClick},f.a.createElement(R,{filterText:s,onClear:r?this.handleClear:void 0,onRemove:this.handleRemove,onFilter:n,result:c,disabled:d,datum:l,focus:this.state.focus,multiple:i,placeholder:t,renderResult:p,setInputReset:this.setInputReset,compressed:a,renderUnmatched:u}),this.renderTreeOptions())}}]),n}(g.b);P.defaultProps={clearable:!1,compressed:!1,absolute:!1,multiple:!1,line:!1,renderItem:function(e){return e},height:300,data:[],defaultExpanded:[]};var W=n(28),z=n(107),_=n(21),H=n(179),L=n(33);function $(e){return e?Array.isArray(e)?e:[e]:[]}var J=n(78),q=Object(i.compose)(a.a,Object(l.a)({className:Object(m.N)("_"),tag:"div"}),function(a){var e,t;return t=e=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).datum=new H.a({data:e.data,loader:e.loader,keygen:e.keygen,mode:e.mode,value:$(e.value),onChange:e.onChange,disabled:"function"==typeof e.disabled?e.disabled:void 0,childrenKey:e.childrenKey,unmatch:e.unmatch}),t}return Object(u.a)(n,e),Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){Object(L.b)(e.data,this.props.data)||(this.datum.setData(this.props.data),this.forceUpdate())}},{key:"render",value:function(){var e=this.props.value,t=Object(_.a)({},this.props,{datum:this.datum});return Object(L.b)($(e),this.datum.getValue())||this.datum.setValue($(e)),f.a.createElement(a,t)}}]),n}(f.a.Component),e.defaultProps={mode:1,childrenKey:"children"},t},function(m){var e,t;return t=e=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).state={innerFilter:void 0,innerData:void 0,filterText:""},t.handleFilter=t.handleFilter.bind(Object(h.a)(Object(h.a)(t))),t.getResultByValues=t.getResultByValues.bind(Object(h.a)(Object(h.a)(t))),t.resultCache=new Map,t}return Object(u.a)(n,e),Object(d.a)(n,[{key:"getResultByValues",value:function(){var a=this,e=this.props,i=e.datum,l=e.noCache,t=e.renderUnmatched,n=i.getValue()||[];t&&(n=n.concat([].concat(this.props.value).filter(function(e){return e&&-1===n.indexOf(e)})));var r=[];return n.forEach(function(e){var t,n=l?void 0:a.resultCache.get(e);n||((n=i.getDataById(e))&&!l?a.resultCache.set(e,n):n||(t={},Object(W.a)(t,"IS_NOT_MATCHED_VALUE",!0),Object(W.a)(t,"value",e),n=t)),n&&r.push(n)}),r}},{key:"handleFilter",value:function(t){var n=this,e=this.props,a=e.filterDelay,i=e.onFilter;if(!t)return this.setState({filterText:"",innerFilter:void 0,innerData:void 0}),this.timer&&clearTimeout(this.timer),void(i&&i(t));i&&(this.setState({filterText:t}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var e=i(t);"function"==typeof e&&n.setState({innerFilter:e})},a))}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,a=e.onFilter,i=e.expanded,l=e.showHitDescendants,r=Object(b.a)(e,["data","onFilter","expanded","showHitDescendants"]),d=this.state,o=d.innerFilter,s=d.filterText,c=a?this.handleFilter:void 0,u=n,h=i;if(o){var p=[];u=Object(z.getFilterTree)(n,o,p,function(e){return t.props.datum.getKey(e)},r.childrenKey,l),h=p}return f.a.createElement(m,Object.assign({},r,{filterText:s,result:this.getResultByValues(),data:u,onFilter:c,expanded:h}))}}]),n}(g.a),e.defaultProps={data:[],filterDelay:300,showHitDescendants:!1},t},J.b)(P);q.displayName="ShineoutTreeSelect";t.a=q}}]);