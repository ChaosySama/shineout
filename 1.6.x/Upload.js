(window.webpackJsonpShineoutDoc=window.webpackJsonpShineoutDoc||[]).push([[53],{1137:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(547),i=n(548),l=n(35),s=n(1138),c=n.n(s),u=n(1139),d=n.n(u),p=Object(l.b)(c.a,d.a),m=[{name:"01-base",title:Object(l.b)("基本用法 \n 基础的文件上传, onSuccess 的返回值会作为 value 传给 onChange","Base \n Basic usage for uploading file, the onSuccess's returns will be the onChange params"),component:n(1140).default,rawText:n(1141)},{name:"01-onChange",title:Object(l.b)("自定义结果 \n 默认展示的结果和 value 里面所存储的值是一样的, 如果有需求需要, 可以用 renderResult 自行处理","Custom result \n The result of the default display is the same as the value stored in the value. If there is a need, you can use the renderResult to handle it yourself."),component:n(1142).default,rawText:n(1143)},{name:"02-image",title:Object(l.b)("上传图片 \n 使用 Upload.Image 处理带预览的图片上传","Image \n Use Upload.Image to upload and preview images."),component:n(1144).default,rawText:n(1145)},{name:"02-show-image",title:Object(l.b)("自定义结果内容 \n 使用  renderContent 可以自定义上传之后的图片结果.","Custom result content \n Use renderContent to customize the image results after uploading."),component:n(1146).default,rawText:n(1147)},{name:"03-button",title:Object(l.b)("按钮上传 \n 使用 Upload.Button 展示单个文件的上传进度","Button \n Use Upload.Button to show the upload progress of individual files"),component:n(1148).default,rawText:n(1149)},{name:"04-validator",title:Object(l.b)("校验 \n 通过 validator.imageSize 校验图片长宽，本例为 200px * 100px","Validator \n Set validator.imageSize to validate the width and height of the image."),component:n(1150).default,rawText:n(1151)},{name:"05-filesize",title:Object(l.b)("文件大小 \n 文件大小校验，本例为 10KB"," \n Set validator.size to validate the size of the file. This example is 10KB."),component:n(1152).default,rawText:n(1153)},{name:"06-error",title:Object(l.b)("异常处理 \n onHttpError 用来处理上传到服务器返回的异常","Error \n Set onHttpError to handle exceptions returned by uploading to the server."),component:n(1154).default,rawText:n(1155)},{name:"08-request-a",title:Object(l.b)("自定义上传 \n 通过 request 函数，替代默认上传方法","Custom Request \n Set request property to use your own XMLHttpRequest."),component:n(1156).default,rawText:n(1157)},{name:"08-request-ignore",title:Object(l.b)(" \n 使用 request 略过上传过程"," \n ignore request with request"),component:n(1158).default,rawText:n(1159)},{name:"09-zip",title:Object(l.b)(" \n 此事例演示通过自定义函数压缩文件后上传"," \n Zip file and upload."),component:n(1160).default,rawText:n(1161)},{name:"10-defaultValue",title:Object(l.b)("默认值 \n 默认值示例","defaultValue \n defaultValue example"),component:n(1162).default,rawText:n(1163)},{name:"11-dragger",title:Object(l.b)("拖拽上传 \n 设置 drop 来支持拖拽上传","Drag and Drop \n set drop to Drag files to upload."),component:n(1164).default,rawText:n(1165)}];t.default=Object(r.a)(function(e){return o.a.createElement(i.b,Object.assign({},e,{codes:void 0,source:p,examples:m}))})},1138:function(e,t){e.exports="# Upload\n\n<br />\n\n本页中的示例服务端限制为 10 KB，大于此限制的文件会上传失败\n\n<example />\n\n## API\n\n### Upload\n\n| 属性 | 类型 | 默认值 | 说明 |\n| --- | --- | --- | --- |\n| accept | string | 无 | 上传文件类型, 和标准一致, 详见[accept](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept) |\n| action | ((file: File) => string) \\| string | 必填 | 上传地址 |\n| children | ReactNode | 必填 | 上传占位内容 |\n| className | string | 无 | 扩展className |\n| defaultValue | any[] | 无 | 默认值 |\n| headers | object | 无 | 请求头部信息 |\n| htmlName | string | 无 | 服务端接收的 filename，不填使用 name |\n| limit | number | 100 | 最大上传文件数 |\n| disabled | boolean | false | 是否禁用上传行为 | \n| name | string | 无 | Form 内存取数据的 key |\n| request | (options: object) => void | 无 | 自定义上传方法<br /> options: 上传的配置 |\n| onChange | (values: any[]) => void | 无 | 值改变回调(上传成功，删除)<br />values: 数组, 其每个值是 onSuccess 的返回值 |\n| onSuccess | (res: string, file: File, data: any, xhr: any) => any | 无 | 上传成功回调，返回结果作为新的 value<br />res: 上传接口返回结果<br />file: 选择的文件<br />data: 请求的数据<br />xhr: 返回的 response |\n| onHttpError | (xhr: any) => string | 无 | 上传失败时回调，返回结果作为错误内容提示 |\n| params | object | 无 | 提交到服务端的额外参数 |\n| recoverAble | boolean | false | 是否可以恢复已删除的value |\n| renderResult | (data: any) => ReactNode | a => a | 结果展示 |\n| validator | object | 无 | 上传前文件校验 |\n| value | any[] | \\[] | defaultValue 和 value 可以同时设置，defaultValue 会被value覆盖<br />在Form中，value会被表单接管，value无效 |\n| withCredentials | boolean | false | 是否携带 cookie |\n| multiple | boolean | false | 是否支持多选文件 |\n| renderContent | (res: any, value: any, index: number, values: any[]) => ReactNode | - | 自定义结果的内容 |\n| validatorHandle | ((error: any, file: File) => boolean) \\| boolean | false | 是否处理校验失败的情况, 如果提供一个函数, 则以函数的返回值判断是否处理此 error |\n| drop | boolean | false | 是否开启拖拽上传文件 |\n| filesFilter | (fileList: any[]) => boolean | 无 | 文件选中后的筛选，用户可自定义最终需要上传的文件列表<br />需返回一个新的文件列表 |\n| onErrorRemove | (xhr: XMLHttpRequest, file: Blob) => void | 无 | 上传失败文件删除之后的回调 |\n| forceAccept | string | 无 | 在使用时关闭了 accept 提供的文件类型过滤后，强制对文件类型进行校验（值同accept） |\n| showUploadList | boolean | true | 是否展示上传列表 |\n\n\n### Upload.Image\n\n| 属性 | 类型 | 默认值 | 说明 |\n| --- | --- | --- | --- |\n| children | ReactNode | 无 | 上传按钮内容，可为空 |\n| renderResult | (data: any) => ReactNode | a => a | 返回图片 url 链接地址 |\n| onErrorRemove | (xhr: XMLHttpRequest, file: Blob) => void | none | 上传失败图片删除之后的回调 |\n| leftHandler | boolean | false | 添加图片视图是否在左侧展示 |\n| onPreview | (url, value, index, values) => void | none | 预览图片操作，默认为画廊展示 |\n| ignorePreview | boolean | false | 是否忽略上传图片预览 |\n\n### Upload.Button\n\n| 属性 | 类型 | 默认值 | 说明 |\n| --- | --- | --- | --- |\n| type | 'primary' \\| success' \\| 'info' \\| 'warning' \\| 'danger' | primary | 按钮类型 |\n| placeholder | ReactNode | 无 | 按钮默认内容 |\n| loading | ReactNode | 无 | 上传中按钮的内容，如果是字符串默认会有spin loading |\n\n\n### UploadOptions \n\n| 属性 | 类型 | 默认值 | 说明 |\n| --- | --- | --- | --- |\n| file |  File | 无 |  传入的文件 |\n| onLoad | function | 无 | 上传事件 |\n| onError | function | 无| 上传出错事件(props 中为 onHttpError) |\n| onProgress | function | 无 | 上传中进度 |\n| onSuccess | function | 无 | 上传成功事件 |\n| params | object | 无 | 上传参数 |\n| onStart | function | 无 | 开始上传事件 |\n| headers | object | 无 | 请求头部信息 |\n\n\n### validator 属性\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| ext | func(string):Error | 判断后缀名，传入参数为文件后缀，校验失败返回 Error |\n| size | func(number):Error | 判断文件大小，校验失败返回 Error |\n| imageSize | func(Image):Error | 只对 Image 有效，判断图片尺寸，校验失败返回 Error |\n| customValidator | func(File):Error | 自定义校验 |\n"},1139:function(e,t){e.exports="# Upload\n\n<example />\n\n## API\n\n### Upload\n\n| Property | Type | Default | Description |\n| --- | --- | --- | --- |\n| accept | string | none | The type of the upload file, same as the standard,See details [accept](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept)  |\n| action | ((file: File) => string) \\| string | required | The address for uploading |\n| children | ReactNode | required | Upload placeholder |\n| className | string | none | Extend className |\n| defaultValue | any[] | -  | default value |\n| headers | object | none | Request headers |\n| htmlName | string | none | The filename received by the server. If it is not filled in, use the name. |\n| limit | number | 100 | Maximum number of uploaded files |\n| disabled | boolean | false | disabled upload action | \n| name | string | none | The key access data in the Form  |\n| request | (options: object) => void | - | Custom upload method<br /> options: the options of upload |\n| onChange | (values: any[]) => void | none | The callback function when the value is changing(Upload successfully, delete)<br />values: Array, the value is the onSuccess returns |\n| onSuccess |  (res: string, file: File, data: any, xhr: any) => any | none | The callback function when to upload successfully. The returned result is as the new value. <br />res: the result that the upload interface returns<br />file: selected file<br /> data: the request data<br /> xhr: reponse |\n| onHttpError | (xhr: any) => string | none | The callback function when to upload unsuccessfully. The returned result is as the error message. |\n| params | object | none | Additional parameters submitted to the server |\n| recoverAble | boolean | true | Whether to recover deleted values. |\n| renderResult | (data: any) => ReactNode | a => a | Display results |\n| validator | object | none | Check file before uploading |\n| value | any[] | \\[] | value |\n| withCredentials | boolean | false | Whether to take the cookie |\n| multiple | boolean | false | Whether multi-select files are supported |\n| renderContent | (res: any, value: any, index: number, values: any[]) => ReactNode | - | Custom content of result  | \n| validatorHandle | ((error: any, file: File) => boolean) \\| boolean  | true | Whether to handle the case of validation failure, if a function is provided, it is judged by the return value of the function. |\n| drop | boolean | false | drop to update |\n| filesFilter | (fileList: any[]) => boolean | none | Filter after file selection, users can customize the list of files that need to be uploaded eventually<br />Need to return a new file list |\n| onErrorRemove | (xhr: XMLHttpRequest, file: Blob) => void | none | remove update failed callback |\n| forceAccept | string | none | After disabled the file type filtering provided by accept, it is mandatory to check the file type, value same as accept |\n| showUploadList | boolean | true | show upload list |\n| leftHandler | boolean | false | add image handler show left |\n\n### Upload.Image\n\n| Property | Type | Default | Description |\n| --- | --- | --- | --- |\n| children | ReactNode | none | The content of the upload button. It can be empty. |\n| leftHandler | boolean | false | Add image view is displayed on the left |\n| renderResult | (data: any) => ReactNode | a => a | Return the link address of the url of the image.|\n| onErrorRemove | (xhr: XMLHttpRequest, file: Blob) => void | none | remove update failed callback |\n| onPreview | (url, value, index, values) => void | none | how to preview the image |\n| ignorePreview | boolean | false | ignore image preview |\n\n### Upload.Button\n\n| Property | Type | Default | Description |\n| --- | --- | --- | --- |\n| type | string | primary | options: \\['primary', success', 'info', 'warning', 'danger'\\] |\n| placeholder | ReactNode | none | button default content |\n| loading | ReactNode | none | content of uploading, will have spin if a string |\n\n\n### UploadOptions \n\n| Property | Type | Default | Description |\n| --- | --- | --- | --- |\n| file |  File | - |  the file |\n| onLoad | function | - | the event of uploading |\n| onError | function | - | the event of upload fail(in props is onHttpError) |\n| onProgress | function | - | the event of uploading progress |\n| onSuccess | function | - | the event of upload successing |\n| params | object | - | the request params |\n| onStart | function | - | the event of start upload |\n| headers | object | - | the request header |\n\n### Validator\n\n| Property | Type | Description |\n| --- | --- | --- |\n| ext | func(string):Error | Judge the file extension, return the Error when the verification fails. |\n| size | func(number):Error | Judge the size of the file and return the Error when the verification fails. |\n| imageSize | func(Image):Error | It is only valid for Image to determine the size of images and return the Error when the verification fails. |\n| customValidator | func(File):Error | custom validator |\n"},1140:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var a=n(5),o=n(6),r=n(7),i=n(4),l=n(8),s=n(0),c=n.n(s),u=n(299),d=n(57),p=n(163),m=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(i.a)(n).call(this,e))).state={value:[]},t}return Object(l.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var t=this;return c.a.createElement(u.a,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",value:this.state.value,name:"file",onSuccess:function(e,t){return t.name},onChange:function(e){console.log(e),t.setState({value:e})},limit:3,style:{width:300}},c.a.createElement(d.a,null,c.a.createElement(p.a,{name:"upload",style:{marginRight:4}}),"Upload file"))}}]),n}(c.a.Component)},1141:function(e,t){e.exports='/**\n * cn - 基本用法\n *    -- 基础的文件上传, onSuccess 的返回值会作为 value 传给 onChange\n * en - Base\n *    -- Basic usage for uploading file, the onSuccess\'s returns will be the onChange params\n\n */\nimport React from \'react\'\nimport { Upload, Button } from \'shineout\'\nimport FontAwesome from \'../Icon/FontAwesome\'\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: [],\n    }\n  }\n\n  render() {\n    return (\n      <Upload\n        action="//jsonplaceholder.typicode.com/posts"\n        accept="image/*"\n        value={this.state.value}\n        name="file"\n        onSuccess={(res, file) => file.name}\n        onChange={v => {\n          console.log(v)\n          this.setState({ value: v })\n        }}\n        limit={3}\n        style={{ width: 300 }}\n      >\n        <Button>\n          <FontAwesome name="upload" style={{ marginRight: 4 }} />\n          Upload file\n        </Button>\n      </Upload>\n    )\n  }\n}\n'},1142:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var a=n(5),o=n(6),r=n(7),i=n(4),l=n(8),s=n(0),c=n.n(s),u=n(299),d=n(57),p=n(163),m=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(i.a)(n).call(this,e))).state={value:[]},t}return Object(l.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var t=this;return c.a.createElement(u.a,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",value:this.state.value,name:"file",renderResult:function(e){return e.name},onSuccess:function(e,t){return t},onChange:function(e){console.log(e),t.setState({value:e})},limit:3,style:{width:300}},c.a.createElement(d.a,null,c.a.createElement(p.a,{name:"upload",style:{marginRight:4}}),"Upload file"))}}]),n}(c.a.Component)},1143:function(e,t){e.exports='/**\n * cn - 自定义结果\n *    -- 默认展示的结果和 value 里面所存储的值是一样的, 如果有需求需要, 可以用 renderResult 自行处理\n * en - Custom result\n *    -- The result of the default display is the same as the value stored in the value. If there is a need, you can use the renderResult to handle it yourself.\n\n */\nimport React from \'react\'\nimport { Upload, Button } from \'shineout\'\nimport FontAwesome from \'../Icon/FontAwesome\'\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: [],\n    }\n  }\n\n  render() {\n    return (\n      <Upload\n        action="//jsonplaceholder.typicode.com/posts"\n        accept="image/*"\n        value={this.state.value}\n        name="file"\n        renderResult={f => f.name}\n        onSuccess={(res, file) => file}\n        onChange={v => {\n          console.log(v)\n          this.setState({ value: v })\n        }}\n        limit={3}\n        style={{ width: 300 }}\n      >\n        <Button>\n          <FontAwesome name="upload" style={{ marginRight: 4 }} />\n          Upload file\n        </Button>\n      </Upload>\n    )\n  }\n}\n'},1144:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299);t.default=function(){return o.a.createElement(r.a.Image,{drop:!0,action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",name:"file",onSuccess:function(e,t,n){return{data:n}},renderResult:function(e){return e.data},limit:3,onStart:function(e){return console.log(e)}})}},1145:function(e,t){e.exports='/**\n * cn - 上传图片\n *    -- 使用 Upload.Image 处理带预览的图片上传\n * en - Image\n *    -- Use Upload.Image to upload and preview images.\n */\nimport React from \'react\'\nimport { Upload } from \'shineout\'\n\nexport default function() {\n  return (\n    <Upload.Image\n      drop\n      action="//jsonplaceholder.typicode.com/posts"\n      accept="image/*"\n      name="file"\n      onSuccess={(res, file, data) => ({ data })}\n      renderResult={f => f.data}\n      limit={3}\n      onStart={f => console.log(f)}\n    />\n  )\n}\n'},1146:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(293);t.default=function(){return o.a.createElement(r.a.Image,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",name:"file",onSuccess:function(e,t,n){return{data:n}},renderResult:function(e){return e.data},limit:3,onStart:function(e){return console.log(e)},renderContent:function(e,t,n,a){return console.log(e,t,n,a),o.a.createElement("div",{onClick:function(){return i.a.info("i am click")}},o.a.createElement("img",{width:"100%",src:e,alt:"not found"}))}})}},1147:function(e,t){e.exports='/**\n * cn - 自定义结果内容\n *    -- 使用  renderContent 可以自定义上传之后的图片结果.\n * en - Custom result content\n *    -- Use renderContent to customize the image results after uploading.\n */\nimport React from \'react\'\nimport { Upload, Message } from \'shineout\'\n\nexport default function() {\n  return (\n    <Upload.Image\n      action="//jsonplaceholder.typicode.com/posts"\n      accept="image/*"\n      name="file"\n      onSuccess={(res, file, data) => ({ data })}\n      renderResult={f => f.data}\n      limit={3}\n      onStart={f => console.log(f)}\n      renderContent={(d, v, i, values) => {\n        console.log(d, v, i, values)\n        return (\n          <div onClick={() => Message.info(\'i am click\')}>\n            <img width="100%" src={d} alt="not found" />\n          </div>\n        )\n      }}\n    />\n  )\n}\n'},1148:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299);t.default=function(){return o.a.createElement(r.a.Button,{action:"//jsonplaceholder.typicode.com/posts",name:"file",onSuccess:function(e,t){return t.name},loading:"正在上传...",placeholder:"点击上传",type:"primary"})}},1149:function(e,t){e.exports='/**\n * cn - 按钮上传\n *    -- 使用 Upload.Button 展示单个文件的上传进度\n * en - Button\n *    -- Use Upload.Button to show the upload progress of individual files\n */\nimport React from \'react\'\nimport { Upload } from \'shineout\'\n\nexport default function() {\n  return (\n    <Upload.Button\n      action="//jsonplaceholder.typicode.com/posts"\n      name="file"\n      onSuccess={(res, file) => file.name}\n      loading="正在上传..."\n      placeholder="点击上传"\n      type="primary"\n    />\n  )\n}\n'},1150:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(163);t.default=function(){return o.a.createElement(r.a.Image,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",name:"file",onSuccess:function(e,t,n){return{data:n}},width:200,height:100,limit:1,renderResult:function(e){return e.data},validator:{imageSize:function(e){return 200!==e.width||100!==e.height?new Error("only allow 200px * 100px"):void 0},ext:function(e){return["jpg","png"].includes(e)?void 0:new Error("File extension must be jpg or png")}}},o.a.createElement("div",{style:{margin:"auto",color:"#999",textAlign:"center"}},o.a.createElement(i.a,{name:"upload"})," Upload Image",o.a.createElement("br",null),"Allow size 200 * 100"))}},1151:function(e,t){e.exports="/**\n * cn - 校验\n *    -- 通过 validator.imageSize 校验图片长宽，本例为 200px * 100px\n * en - Validator\n *    -- Set validator.imageSize to validate the width and height of the image.\n */\nimport React from 'react'\nimport { Upload } from 'shineout'\nimport FontAwesome from '../Icon/FontAwesome'\n\nexport default function() {\n  return (\n    <Upload.Image\n      action=\"//jsonplaceholder.typicode.com/posts\"\n      accept=\"image/*\"\n      name=\"file\"\n      onSuccess={(res, file, data) => ({ data })}\n      width={200}\n      height={100}\n      limit={1}\n      renderResult={f => f.data}\n      validator={{\n        imageSize: img => (img.width !== 200 || img.height !== 100 ? new Error('only allow 200px * 100px') : undefined),\n        ext: ext => (['jpg', 'png'].includes(ext) ? undefined : new Error('File extension must be jpg or png')),\n      }}\n    >\n      <div style={{ margin: 'auto', color: '#999', textAlign: 'center' }}>\n        <FontAwesome name=\"upload\" /> Upload Image\n        <br />\n        Allow size 200 * 100\n      </div>\n    </Upload.Image>\n  )\n}\n"},1152:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(57),l=n(163);t.default=function(){return o.a.createElement("div",null,o.a.createElement(r.a,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",multiple:!0,name:"file",onSuccess:function(e,t){return t.name},style:{width:300,marginBottom:30},validator:{size:function(e){return 10240<e?new Error("max file size is 10KB"):void 0}},validatorHandle:function(e,t){return console.log(e,t),!0}},o.a.createElement(i.a,null,o.a.createElement(l.a,{name:"upload"})," Upload file")),o.a.createElement(r.a.Image,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",multiple:!0,name:"file",onSuccess:function(e,t,n){return{data:n}},validator:{size:function(e){return 10240<e?new Error("max file size is 10KB"):void 0}},renderResult:function(e){return e.data}}))}},1153:function(e,t){e.exports='/**\n * cn - 文件大小\n *    -- 文件大小校验，本例为 10KB\n * en -\n *    -- Set validator.size to validate the size of the file. This example is 10KB.\n */\nimport React from \'react\'\nimport { Upload, Button } from \'shineout\'\nimport FontAwesome from \'../Icon/FontAwesome\'\n\nexport default function() {\n  return (\n    <div>\n      <Upload\n        action="//jsonplaceholder.typicode.com/posts"\n        accept="image/*"\n        multiple\n        name="file"\n        onSuccess={(res, file) => file.name}\n        style={{ width: 300, marginBottom: 30 }}\n        validator={{\n          size: s => (s > 10240 ? new Error(\'max file size is 10KB\') : undefined),\n        }}\n        validatorHandle={(error, file) => {\n          console.log(error, file)\n          return true\n        }}\n      >\n        <Button>\n          <FontAwesome name="upload" /> Upload file\n        </Button>\n      </Upload>\n\n      <Upload.Image\n        action="//jsonplaceholder.typicode.com/posts"\n        accept="image/*"\n        multiple\n        name="file"\n        onSuccess={(res, file, data) => ({ data })}\n        validator={{\n          size: s => (s > 10240 ? new Error(\'max file size is 10KB\') : undefined),\n        }}\n        renderResult={f => f.data}\n      />\n    </div>\n  )\n}\n'},1154:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(57),l=n(163);t.default=function(){return o.a.createElement("div",null,o.a.createElement(r.a,{action:"/path-no-exist",accept:"image/*",name:"file",onSuccess:function(e,t){return t.name},onHttpError:function(e){return console.log(e),404===e.status?"Url not found.":"Upload Fail."},limit:3,style:{width:300,marginBottom:30}},o.a.createElement(i.a,null,o.a.createElement(l.a,{name:"upload"})," Upload file")),o.a.createElement(r.a.Image,{action:"/path-no-exist",accept:"image/*",name:"file",onSuccess:function(e,t,n){return{data:n}},onHttpError:function(e){return console.log(e),404===e.status?"Url not found.":"Upload Fail."},renderResult:function(e){return e.data}}))}},1155:function(e,t){e.exports="/**\n * cn - 异常处理\n *    -- onHttpError 用来处理上传到服务器返回的异常\n * en - Error\n *    -- Set onHttpError to handle exceptions returned by uploading to the server.\n */\nimport React from 'react'\nimport { Upload, Button } from 'shineout'\nimport FontAwesome from '../Icon/FontAwesome'\n\nexport default function() {\n  return (\n    <div>\n      <Upload\n        action=\"/path-no-exist\"\n        accept=\"image/*\"\n        name=\"file\"\n        onSuccess={(res, file) => file.name}\n        onHttpError={xhr => {\n          console.log(xhr)\n          if (xhr.status === 404) return 'Url not found.'\n          return 'Upload Fail.'\n        }}\n        limit={3}\n        style={{ width: 300, marginBottom: 30 }}\n      >\n        <Button>\n          <FontAwesome name=\"upload\" /> Upload file\n        </Button>\n      </Upload>\n\n      <Upload.Image\n        action=\"/path-no-exist\"\n        accept=\"image/*\"\n        name=\"file\"\n        onSuccess={(res, file, data) => ({ data })}\n        onHttpError={xhr => {\n          console.log(xhr)\n          if (xhr.status === 404) return 'Url not found.'\n          return 'Upload Fail.'\n        }}\n        renderResult={f => f.data}\n      />\n    </div>\n  )\n}\n"},1156:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(57),l=n(163),s=function(e){var t=e.file,n=e.onLoad,a=e.onError,o=e.onProgress,r=new XMLHttpRequest;r.open("post","//jsonplaceholder.typicode.com/posts");var i=new FormData;return i.append("test",t),r.upload.onprogress=o,r.onload=function(){return n(r)},r.onerror=function(){return a({statusText:"error message"})},r.send(i),r};t.default=function(){return o.a.createElement(r.a,{accept:"image/*",onSuccess:function(e,t){return{name:"upload ".concat(t.name)}},limit:3,style:{width:300},request:s,renderResult:function(e){return e.name}},o.a.createElement(i.a,null,o.a.createElement(l.a,{name:"upload"})," Upload file"))}},1157:function(e,t){e.exports="/**\n * cn - 自定义上传\n *    -- 通过 request 函数，替代默认上传方法\n * en - Custom Request\n *    -- Set request property to use your own XMLHttpRequest.\n */\nimport React from 'react'\nimport { Upload, Button } from 'shineout'\nimport FontAwesome from '../Icon/FontAwesome'\n\nconst request = options => {\n  const { file, onLoad, onError, onProgress } = options\n  const xhr = new XMLHttpRequest()\n  xhr.open('post', '//jsonplaceholder.typicode.com/posts')\n\n  const data = new FormData()\n  data.append('test', file)\n  xhr.upload.onprogress = onProgress\n  xhr.onload = () => onLoad(xhr)\n  xhr.onerror = () => onError({ statusText: 'error message' })\n  xhr.send(data)\n\n  return xhr\n}\n\nexport default function() {\n  return (\n    <Upload\n      accept=\"image/*\"\n      onSuccess={(res, file) => ({ name: `upload ${file.name}` })}\n      limit={3}\n      style={{ width: 300 }}\n      request={request}\n      renderResult={d => d.name}\n    >\n      <Button>\n        <FontAwesome name=\"upload\" />\n        &nbsp;Upload file\n      </Button>\n    </Upload>\n  )\n}\n"},1158:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=function(e){var t=e.file,n=e.onLoad,a=e.onError,o=new FileReader;o.addEventListener("load",function(){n({status:200,response:o.result})}),o.addEventListener("error",function(){a({statusText:"Oops, something went wrong"})}),o.readAsDataURL(t)};t.default=function(){return o.a.createElement(r.a.Image,{accept:"image/*",onSuccess:function(e,t){return{name:t.name,src:e}},request:i,renderResult:function(e){return e.src}})}},1159:function(e,t){e.exports="/**\n * cn -\n *    -- 使用 request 略过上传过程\n * en -\n *    -- ignore request with request\n */\nimport React from 'react'\nimport { Upload } from 'shineout'\n\nconst request = options => {\n  const { file, onLoad, onError } = options\n  const reader = new FileReader()\n  reader.addEventListener('load', () => {\n    onLoad({ status: 200, response: reader.result })\n  })\n  reader.addEventListener('error', () => {\n    onError({ statusText: 'Oops, something went wrong' })\n  })\n  reader.readAsDataURL(file)\n}\n\nexport default function() {\n  return (\n    <Upload.Image\n      accept=\"image/*\"\n      onSuccess={(dataURL, file) => ({ name: file.name, src: dataURL })}\n      request={request}\n      renderResult={d => d.src}\n    />\n  )\n}\n"},1160:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(57),l=n(163),s=function(e){var a=e.file,o=e.onLoad,r=e.onError,i=e.onProgress,l=new XMLHttpRequest;l.open("post","//jsonplaceholder.typicode.com/posts");var t=new window.JSZip;return t.file(a.name,a),t.generateInternalStream({type:"blob"}).accumulate(function(e){i(e,"zipping...")}).then(function(e){var t=new File([e],"".concat(a.name,".zip")),n=new FormData;n.append("file",t),l.upload.onprogress=function(e){return i(e,"sending...")},l.onload=function(){return o(l)},l.onerror=function(){return r({statusText:"error message"})},l.send(n)}),l};t.default=function(){return o.a.createElement(r.a,{onSuccess:function(e,t){return{name:"upload ".concat(t.name)}},limit:3,style:{width:300},request:s,renderResult:function(e){return e.name}},o.a.createElement(i.a,null,o.a.createElement(l.a,{name:"upload"})," Upload file"))}},1161:function(e,t){e.exports="/**\n * cn -\n *    -- 此事例演示通过自定义函数压缩文件后上传\n * en -\n *    -- Zip file and upload.\n */\nimport React from 'react'\nimport { Upload, Button } from 'shineout'\nimport FontAwesome from '../Icon/FontAwesome'\n\nconst request = options => {\n  const { file, onLoad, onError, onProgress } = options\n\n  const xhr = new XMLHttpRequest()\n  xhr.open('post', '//jsonplaceholder.typicode.com/posts')\n\n  const zip = new window.JSZip()\n  zip.file(file.name, file)\n  zip\n    .generateInternalStream({ type: 'blob' })\n    .accumulate(e => {\n      onProgress(e, 'zipping...')\n    })\n    .then(content => {\n      const zipFile = new File([content], `${file.name}.zip`)\n      const data = new FormData()\n      data.append('file', zipFile)\n      xhr.upload.onprogress = m => onProgress(m, 'sending...')\n      xhr.onload = () => onLoad(xhr)\n      xhr.onerror = () => onError({ statusText: 'error message' })\n      xhr.send(data)\n    })\n\n  return xhr\n}\n\nexport default function() {\n  return (\n    <Upload\n      onSuccess={(res, file) => ({ name: `upload ${file.name}` })}\n      limit={3}\n      style={{ width: 300 }}\n      request={request}\n      renderResult={d => d.name}\n    >\n      <Button>\n        <FontAwesome name=\"upload\" /> Upload file\n      </Button>\n    </Upload>\n  )\n}\n"},1162:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(57),l=n(163);t.default=function(){var e=[{name:"test file.png",url:"../images/1_s.jpg"}];return o.a.createElement("div",null,o.a.createElement(r.a,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",multiple:!0,limit:2,name:"file",onSuccess:function(e,t){return{name:t.name}},style:{width:300,marginBottom:30},defaultValue:e,renderResult:function(e){return e.name}},o.a.createElement(i.a,null,o.a.createElement(l.a,{name:"upload"})," Upload file")),o.a.createElement(r.a.Image,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",multiple:!0,name:"file",limit:1,recoverAble:!0,onSuccess:function(e,t,n){return{url:n}},renderResult:function(e){return e.url},defaultValue:e}))}},1163:function(e,t){e.exports='/**\n * cn - 默认值\n *    -- 默认值示例\n * en - defaultValue\n *    -- defaultValue example\n */\nimport React from \'react\'\nimport { Upload, Button } from \'shineout\'\nimport FontAwesome from \'../Icon/FontAwesome\'\n\nexport default function() {\n  const defaultValue = [\n    {\n      name: \'test file.png\',\n      url: \'../images/1_s.jpg\',\n    },\n  ]\n\n  return (\n    <div>\n      <Upload\n        action="//jsonplaceholder.typicode.com/posts"\n        accept="image/*"\n        multiple\n        limit={2}\n        name="file"\n        onSuccess={(res, file) => ({ name: file.name })}\n        style={{ width: 300, marginBottom: 30 }}\n        defaultValue={defaultValue}\n        renderResult={f => f.name}\n      >\n        <Button>\n          <FontAwesome name="upload" /> Upload file\n        </Button>\n      </Upload>\n\n      <Upload.Image\n        action="//jsonplaceholder.typicode.com/posts"\n        accept="image/*"\n        multiple\n        name="file"\n        limit={1}\n        recoverAble\n        onSuccess={(res, file, data) => ({ url: data })}\n        renderResult={f => f.url}\n        defaultValue={defaultValue}\n      />\n    </div>\n  )\n}\n'},1164:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(299),i=n(57),l=n(163);function s(){return o.a.createElement(r.a.Image,{action:"//jsonplaceholder.typicode.com/posts",accept:"image/*",name:"file",onSuccess:function(e,t,n){return{data:n}},renderResult:function(e){return e.data},limit:3,onStart:function(e){return console.log(e)},width:250,drop:!0},o.a.createElement("div",{style:{textAlign:"center",width:"100%",padding:20}},o.a.createElement(l.a,{style:{color:"#409dfd",fontSize:20},name:"image"}),o.a.createElement("br",null),"Click or Drag image to upload"))}function c(){return o.a.createElement(r.a,{action:"//jsonplaceholder.typicode.com/posts",multiple:!0,name:"file",onSuccess:function(e,t){return t.name},limit:3,style:{width:300},drop:!0},o.a.createElement(i.a,null,o.a.createElement(l.a,{name:"file"}),"  Drop file to upload"))}t.default=function(){return o.a.createElement("div",null,o.a.createElement(s,null),o.a.createElement("br",null),o.a.createElement(c,null))}},1165:function(e,t){e.exports='/**\n * cn - 拖拽上传\n *    -- 设置 drop 来支持拖拽上传\n * en - Drag and Drop\n *    -- set drop to Drag files to upload.\n */\nimport React from \'react\'\nimport { Upload, Button } from \'shineout\'\nimport FontAwesome from \'../Icon/FontAwesome\'\n\nfunction DraggerImage() {\n  return (\n    <Upload.Image\n      action="//jsonplaceholder.typicode.com/posts"\n      accept="image/*"\n      name="file"\n      onSuccess={(res, file, data) => ({ data })}\n      renderResult={f => f.data}\n      limit={3}\n      onStart={f => console.log(f)}\n      width={250}\n      drop\n    >\n      <div style={{ textAlign: \'center\', width: \'100%\', padding: 20 }}>\n        <FontAwesome style={{ color: \'#409dfd\', fontSize: 20 }} name="image" />\n        <br />\n        Click or Drag image to upload\n      </div>\n    </Upload.Image>\n  )\n}\n\nfunction DraggerFile() {\n  return (\n    <Upload\n      action="//jsonplaceholder.typicode.com/posts"\n      multiple\n      name="file"\n      onSuccess={(res, file) => file.name}\n      limit={3}\n      style={{ width: 300 }}\n      drop\n    >\n      <Button>\n        <FontAwesome name="file" />\n        &nbsp; Drop file to upload\n      </Button>\n    </Upload>\n  )\n}\n\nexport default function() {\n  return (\n    <div>\n      <DraggerImage />\n      <br />\n      <DraggerFile />\n    </div>\n  )\n}\n'},291:function(e,t,n){"use strict";var d=n(21),a=n(5),o=n(6),r=n(7),i=n(25),l=n(4),s=n(8),c=n(1),u=n(0),p=n.n(u),m=n(15),h=n.n(m),f=n(18),v=n(166),b=n(2),g=n(47),y=n.n(g),j=n(46),O=n(106),w=n(39),E=n(42),k=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(l.a)(n).call(this,e))).state={loading:!0,status:0,style:{maxHeight:e.maxHeight,maxWidth:e.maxWidth}},t.handleMove=t.handleMove.bind(Object(c.a)(Object(c.a)(t))),t.handleResize=t.handleResize.bind(Object(c.a)(Object(c.a)(t))),t.handleLoaded=t.handleLoaded.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&1===this.state.status&&(this.setState({loading:!0,status:0,style:{maxHeight:this.props.maxHeight,maxWidth:this.props.maxWidth}}),this.props.lockScroll(!1))}},{key:"move",value:function(e,t){var n=this.element.getBoundingClientRect(),a=this.element.querySelector("img"),o=n.width-100,r=n.height-100,i=(e-n.left-50)/o,l=(t-n.top-50)/r;this.element.scrollTop=(a.offsetHeight-r)*l,this.element.scrollLeft=(a.offsetWidth-o)*i}},{key:"handleLoaded",value:function(){this.setState({loading:!1})}},{key:"handleMove",value:function(e){this.move(e.clientX,e.clientY)}},{key:"handleResize",value:function(e){var t=this,n=this.props,a=n.maxHeight,o=n.maxWidth;if("center"===n.position){var r=1===this.state.status?0:1,i=e.clientX,l=e.clientY;this.setState(Object(j.a)(function(e){e.status=r,e.style=0===r?{maxHeight:a,maxWidth:o}:void 0}),function(){0!==r&&t.move(i,l)}),this.props.lockScroll(1===r)}}},{key:"render",value:function(){var t=this,e=this.props,n=e.maxHeight,a=e.maxWidth,o=e.src,r=this.state,i=r.status,l=r.loading,s={maxHeight:n,maxWidth:a,cursor:"center"===this.props.position?1===i?"zoom-out":"zoom-in":"pointer"};1===i&&(s.overflow="scroll",s.borderRightWidth=0,s.borderBottomWidth=0);var c=1===i?this.handleMove:void 0;return p.a.createElement("div",{onClick:this.handleResize,onMouseMove:c,ref:function(e){t.element=e},style:s,className:Object(b.p)("magnify")},p.a.createElement("img",{onLoad:this.handleLoaded,src:o,alt:"",style:this.state.style}),l&&p.a.createElement("div",{className:Object(b.p)("magnify-loading")},p.a.createElement(E.a,{size:30})))}}]),n}(f.b),x=n(24),R=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(l.a)(n).call(this,e))).state={current:e.current,direction:"init"},t.handleScroll=t.handleScroll.bind(Object(c.a)(Object(c.a)(t))),t.lockScroll=t.lockScroll.bind(Object(c.a)(Object(c.a)(t))),t.scrollX=0,t.rawScroll=!1,t}return Object(s.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){Object(i.a)(Object(l.a)(n.prototype),"componentDidMount",this).call(this),document.addEventListener("wheel",this.handleScroll,{passive:!1})}},{key:"componentWillUnmount",value:function(){Object(i.a)(Object(l.a)(n.prototype),"componentWillUnmount",this).call(this),document.removeEventListener("wheel",this.handleScroll,{passive:!1})}},{key:"lockScroll",value:function(e){this.rawScroll=e}},{key:"handleClick",value:function(t){var e=this,n=this.props.images.length;this.setState(Object(j.a)(function(e){e.current+=t,e.current<0?e.current=0:e.current>=n?e.current=n-1:e.direction=1===t?"forward":"backward"}),function(){setTimeout(function(){e.setState({direction:"init"})},400)})}},{key:"handleScroll",value:function(e){var t=this;if(!this.rawScroll&&(e.preventDefault(),0===this.scrollX)){var n=Object(O.a)(e);this.scrollX+=n.spinX,this.scrollX<0&&this.handleClick(-1),0<this.scrollX&&this.handleClick(1),this.scrollTimer=setTimeout(function(){t.scrollX=0},1e3)}}},{key:"renderImage",value:function(e,t){var n,a=x.docSize.height,o=x.docSize.width;return"center"!==t&&(n=this.handleClick.bind(this,"left"===t?-1:1)),p.a.createElement("div",{key:e.key,className:Object(b.p)(t,this.state.direction),onClick:n},p.a.createElement("a",{onClick:this.props.onClose,className:Object(b.p)("close")},w.a.Close),p.a.createElement(k,{maxWidth:o-400,maxHeight:a-160,position:t,src:e.src,lockScroll:this.lockScroll}))}},{key:"render",value:function(){var e=this.state.current,t=this.props,n=t.images,a=t.onClose,o=n[e],r=[];return r.push(p.a.createElement("div",{key:"overlay",className:Object(b.p)("overlay"),onClick:a})),r.push(this.renderImage(o,"center")),n[e-1]&&r.push(this.renderImage(n[e-1],"left")),n[e+1]&&r.push(this.renderImage(n[e+1],"right")),r}}]),n}(f.b);R.defaultProps={current:0};var S,C=R;function U(){document.removeEventListener("keydown",N),y.a.unmountComponentAtNode(S),document.body.removeChild(S),S=null}function N(e){27===e.keyCode&&U()}var F=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Array.isArray(e)||(e=[e]);var n=S||(S=document.createElement("div"),document.body.appendChild(S),S.className=Object(b.p)("gallery"),S);document.addEventListener("keydown",N),y.a.render(p.a.createElement(C,{onClose:U,current:t,images:e}),n)},A=n(32),D=n(14),I=n(34),z=n(75),P=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(l.a)(n).call(this,e))).state={status:0},t.bindElement=t.bindElement.bind(Object(c.a)(Object(c.a)(t))),t.markToRender=t.markToRender.bind(Object(c.a)(Object(c.a)(t))),t.handleAlt=t.handleAlt.bind(Object(c.a)(Object(c.a)(t))),t.handleClick=t.handleClick.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){Object(i.a)(Object(l.a)(n.prototype),"componentDidMount",this).call(this),this.fetchImage()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.src,a=t.alt;e.src===n&&e.alt===a||this.fetchImage()}},{key:"componentWillUnmount",value:function(){Object(i.a)(Object(l.a)(n.prototype),"componentWillUnmount",this).call(this),Object(v.b)(this.lazyId),delete this.image}},{key:"getUrl",value:function(e){return("autoSSL"in this.props?this.props.autoSSL:D.a.autoSSL)?Object(I.removeProtocol)(e):e}},{key:"preview",value:function(){var e=this.props,t=e.src,n=e.href;F({thumb:t,src:n||t,key:"key"})}},{key:"bindElement",value:function(e){this.element=e}},{key:"fetchImage",value:function(){if(this.lazyId&&Object(v.b)(this.lazyId),this.props.lazy){var e=this.props.container;this.lazyId=Object(v.a)({offset:"number"==typeof this.props.lazy?this.props.lazy:0,element:this.element,render:this.markToRender,container:"string"==typeof e?document.querySelector(e):e})}else this.markToRender()}},{key:"markToRender",value:function(){var e=this,t=this.props.src;if(t){delete this.image;var n=new window.Image;n.onload=function(){return e.setState({status:1})},n.onerror=this.handleAlt,n.src=this.getUrl(t),this.image=n}else this.handleAlt()}},{key:"handleAlt",value:function(){var e=this,t=this.props.alt;if(t){var n=new window.Image;n.onload=function(){return e.setState({status:2})},n.onerror=function(){return e.setState({status:3})},n.src=this.getUrl(t)}else this.setState({status:3})}},{key:"handleClick",value:function(e){var t=this.props,n=t.onClick,a=t.target,o=t.src,r=t.href;n?n(e):r&&"_modal"===a&&(e.preventDefault(),F({thumb:o,src:r||o,key:"key"}))}},{key:"renderType",value:function(e){var t=this.props,n=t.title,a=t.fit;return"fill"===a||"fit"===a?p.a.createElement("div",{className:Object(b.p)("inner"),title:n,style:{backgroundImage:'url("'.concat(e,'")')}}):p.a.createElement("div",{className:Object(b.p)("inner"),title:n},p.a.createElement("img",{alt:"",src:e}))}},{key:"renderPlaceholder",value:function(){var e=this.props,t=e.placeholder,n=e.title;return p.a.isValidElement(t)?p.a.createElement("div",{className:Object(b.p)("inner")},t):p.a.createElement("div",{className:Object(b.p)("inner","mask")},p.a.createElement("div",null,n,p.a.createElement("span",{className:Object(b.p)("placeholder")},t||Object(A.a)("loading"))))}},{key:"renderImage",value:function(){var e=this.state.status,t=this.props,n=t.alt,a=t.src,o=t.title,r=t.error;switch(e){case 0:return this.renderPlaceholder();case 1:return this.renderType(a);case 2:return this.renderType(n);case 3:return p.a.createElement("div",{className:Object(b.p)("inner","mask")},p.a.createElement("div",null,r||o||"no found"));default:return null}}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.height,a=e.style,o=e.shape,r=e.fit,i=e.width,l=e.target,s=h()(Object(b.p)("_",o,r),this.props.className),c=t?"a":"div",u=Object(d.a)({ref:this.bindElement,onClick:this.handleClick,target:"_download"===l?"_self":l,download:"_download"===l,className:s,style:Object.assign({},a,{width:i,paddingBottom:n})},Object(z.a)(this.props));return t&&"_modal"===l||(u.href=t),p.a.createElement(c,u,this.renderImage())}}]),n}(f.b);P.defaultProps={lazy:!1,target:"_modal",width:"100%",height:"100%"};var T={};P.symbolType=T;var B=P,L=n(13),H=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"handleClick",value:function(r){var e=this.props.children,i=[],l=0;u.Children.toArray(e).forEach(function(e,t){if(e&&e.type&&e.type.symbolType===T){r===t&&(l=i.length);var n=e.props,a=n.src,o=n.href;i.push({thumb:a,src:o||a,key:t})}}),F(i,l)}},{key:"render",value:function(){var n=this,e=this.props,t=(e.children,e.pile),a=e.style,o=Object(L.a)(e,["children","pile","style"]);return p.a.createElement("div",{className:Object(b.p)("group",t&&"pile"),style:a},u.Children.toArray(this.props.children).map(function(e,t){return Object(u.cloneElement)(e,Object(d.a)({},o,{onClick:n.handleClick.bind(n,t)}))}))}}]),t}(u.PureComponent);B.Group=H,B.displayName="ShineoutImage",B.Group.displayName="ShineoutImageGroup";t.a=B},292:function(e,t,n){"use strict";var a=n(0),v=n.n(a),o=n(15),b=n.n(o),g=n(2),y=function(n){return n.from?[{pos:"0%",color:n.from},{pos:"100%",color:n.to}]:Object.keys(n).sort(function(e,t){return window.parseInt(e)-window.parseInt(t)}).reduce(function(e,t){return e.push({pos:t,color:n[t]}),e},[])};function r(e){var t=e.children,n=e.strokeWidth,a=e.type,o=e.value,r=e.color,i=e.style,l=e.background,s=b()(Object(g.A)("line",a),e.className),c={width:"".concat(o/100*100,"%"),borderRadius:n/2};return"string"==typeof r?(c.background=r,c.backgroundSize="1em 1em"):"object"==typeof r&&(c.background="linear-gradient(to right, ".concat(y(r).reduce(function(e,t){var n="".concat(t.color," ").concat(t.pos);return e?"".concat(e,",").concat(n):n},""),")")),v.a.createElement("div",{className:s,style:i},v.a.createElement("div",{className:Object(g.A)("background"),style:{height:n,background:l,borderRadius:n/2}},v.a.createElement("div",{className:Object(g.A)("front"),style:c})),void 0!==t&&v.a.createElement("div",{className:Object(g.A)("content")},t))}r.defaultProps={strokeWidth:8};var i=r;function l(e){var t=e.children,n=e.strokeWidth,a=e.type,o=e.color,r=e.size,i=e.value,l=e.background,s=e.strokeLinecap,c=b()(Object(g.A)("circle",a),e.className),u=100-Math.ceil(2*n/r*100),d=2*Math.PI*u,p=[d*(i/100),d*(1-i/100)],m=Object.assign({width:r,height:r},e.style),h=0===i&&"round"===s?0:2*n,f=o&&"object"==typeof o;return v.a.createElement("div",{className:c,style:m},v.a.createElement("svg",{viewBox:"0 0 200 200"},f?v.a.createElement("defs",null,v.a.createElement("linearGradient",{id:"progress-linear",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},y(o).map(function(e){return v.a.createElement("stop",{key:e.pos,offset:e.pos,stopColor:e.color})}))):null,v.a.createElement("circle",{className:Object(g.A)("background"),cx:"100",cy:"100",r:u,strokeWidth:2*n,fill:"transparent",style:{stroke:l}}),v.a.createElement("circle",{className:Object(g.A)("front"),cx:"100",cy:"100",r:u,fill:"transparent",style:{stroke:f?"url('#progress-linear')":o},strokeDasharray:p,strokeLinecap:s,strokeWidth:h})),t&&v.a.createElement("div",{className:Object(g.A)("content")},t))}l.defaultProps={strokeLinecap:"round",strokeWidth:8,size:100};var s=l;function c(e){switch(e.shape){case"circle":return v.a.createElement(s,e);default:return v.a.createElement(i,e)}}c.defaultProps={shape:"line"},c.displayName="ShineoutProgress";t.a=c},293:function(e,t,n){"use strict";var a=n(0),p=n.n(a),o=n(47),r=n.n(o),m=n(2),i=n(5),l=n(6),s=n(7),c=n(4),u=n(8),d=n(1),h=n(46),f=n(18),v=n(105),b=n(20),g=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(s.a)(this,Object(c.a)(n).call(this,e))).state={messages:[]},t.removeMessage=t.removeMessage.bind(Object(d.a)(Object(d.a)(t))),t.handleClassName=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top",t=1<arguments.length?arguments[1]:void 0;return Object(m.v)("item","item-".concat(t?"dismissed":"show","-").concat(e))},t.handleStyle=function(e,t,n){if(!e||null==t)return null;var a={};switch(n){case"bottom-right":case"bottom-left":break;default:a={zIndex:-1,opacity:0,marginTop:-t}}return a},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"addMessage",value:function(t){var e=this,n=Object(b.c)();return this.setState(Object(h.a)(function(e){e.messages.push(Object.assign({id:n},t))})),0<t.duration&&setTimeout(function(){e.setState(Object(h.a)(function(e){e.messages.forEach(function(e){e.id===n&&(e.dismiss=!0)})}))},1e3*t.duration),this.closeMessageForAnimation.bind(this,n,200,200)}},{key:"removeMessage",value:function(t){var n,e=this.state.messages.filter(function(e){return e.id!==t||(e.onClose&&(n=e.onClose),!1)});0===e.length?this.props.onDestory():this.setState({messages:e}),n&&n()}},{key:"closeMessageForAnimation",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var o=n[0],r=n[1],i=n[2];r?(this.setState(Object(h.a)(function(e){e.messages.forEach(function(e){e.id===o&&(e.dismiss=!0,e.h=i+20)})})),setTimeout(function(){e.removeMessage(o)},r)):this.removeMessage(o)}},{key:"closeEvent",value:function(e,t){if(0===t)return this.removeMessage.bind(this,e)}},{key:"render",value:function(){var d=this;return[this.state.messages.map(function(e){var t=e.id,n=e.type,a=e.content,o=e.dismiss,r=e.h,i=e.title,l=e.top,s=e.className,c=e.position,u=e.hideClose;return p.a.createElement("div",{key:t,className:"".concat(d.handleClassName(c,o)," ").concat(s),style:d.handleStyle(o,r,c)},p.a.createElement(v.a,{outAnimation:!0,className:Object(m.v)("msg"),dismiss:o,hideClose:u,onClose:d.closeMessageForAnimation.bind(d,t),icon:!0,iconSize:i?20:14,style:{top:l},type:n},i&&p.a.createElement("h3",null,i),a))})]}}]),n}(f.b);g.displayName="ShineoutMessage";var y=g,j={},O={};function w(e){j[e]&&(r.a.unmountComponentAtNode(j[e]),document.body.removeChild(j[e]),delete j[e]),O[e]&&delete O[e]}function E(o){return new Promise(function(t){var e,n,a=O[o];a?t(a):r.a.render(p.a.createElement(y,{ref:function(e){O[o]=e,t(e)},onDestory:w.bind(null,o)}),(e=o,(n=document.createElement("div")).className=Object(m.v)("_",e),document.body.appendChild(n),j[e]=n))})}var k=function(p){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=e.onClose,o=e.position,r=void 0===o?"top":o,i=e.title,l=e.className,s=void 0===l?"":l,c=e.top,u=void 0===c?"auto":c,d=e.hideClose;return E(r).then(function(e){return e.addMessage({content:t,duration:n,type:p,onClose:a,title:i,className:s,top:u,position:r,hideClose:d})})}};t.a={show:k("default"),success:k("success"),info:k("info"),warn:k("warning"),warning:k("warning"),danger:k("danger"),error:k("danger"),close:function(e){e?w(e):["top","middle","top-left","top-right","bottom-left","bottom-right"].forEach(function(e){w(e)})}}},299:function(e,t,n){"use strict";var a=n(50),u=n(21),o=n(5),r=n(6),i=n(7),l=n(4),s=n(8),c=n(1),d=n(0),w=n.n(d),p=n(15),E=n.n(p),g=n(46),m=n(18),h=n(20),f=n(37),k=n(2);var y=function(e){var t=e.url,n=e.name,a=(e.cors,e.file),o=e.onProgress,r=e.onLoad,i=e.onError,l=e.withCredentials,s=e.params,c=void 0===s?{}:s,u=e.headers,d=void 0===u?{}:u,p=e.onStart;if(t){var m=new FormData;Object.keys(c).forEach(function(e){m.append(e,c[e])}),m.append(n,a);var h,f,v,b=(h="post",f=t,"withCredentials"in(v=new XMLHttpRequest)?v.open(h,f,!0):"undefined"!=typeof XDomainRequest?(v=new XDomainRequest).open(h,f):v=null,v);return b.withCredentials=l,o&&b.upload.addEventListener("progress",o,!1),b.onload=function(e){return r(e.currentTarget)},b.onerror=i,Object.keys(d).forEach(function(e){b.setRequestHeader(e,d[e])}),p&&p(a),b.send(m),b}console.error(new Error("action is required, but its value is ".concat(t)))},v={display:"none"},b=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).locked=!1,t.bindElement=t.bindElement.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"bindElement",value:function(e){this.input=e}},{key:"click",value:function(){var e=this;this.locked||(this.locked=!0,this.input.value="",this.input.click(),setTimeout(function(){e.locked=!1},1e3))}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.onChange,a=e.multiple,o=e.webkitdirectory;return w.a.createElement("input",{ref:this.bindElement,accept:t,multiple:a,onChange:n,style:v,webkitdirectory:o,type:"file"})}}]),n}(d.PureComponent),j=n(292),O=n(42),x=n(39),R=w.a.createElement("span",{style:{display:"inline-block",marginRight:8}},w.a.createElement(O.a,{size:10,name:"ring"})),S=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).handleRemove=t.handleRemove.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"handleRemove",value:function(){this.props.onRemove(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.name,a=e.status,o=e.process,r=Object(k.O)("view-file",3===a&&"error");return w.a.createElement("div",{className:r},w.a.createElement("div",{className:Object(k.O)("text")},1===a&&R," ",n," ",t&&w.a.createElement("span",null,"(",t,") ")),w.a.createElement("a",{className:Object(k.O)("delete"),onClick:this.handleRemove},x.a.Close),3!==a&&w.a.createElement(j.a,{className:Object(k.O)("progress"),background:0<=o?"#e9ecef":"transparent",value:o,strokeWidth:2}))}}]),n}(d.PureComponent),C=n(291),U=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).handleRemove=t.handleRemove.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"handleRemove",value:function(){this.props.onRemove(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.process,n=e.status,a=e.style,o=e.data,r=e.message,i=Object(k.O)("image-item",3===n&&"error");return w.a.createElement("div",{style:a,className:i},o&&w.a.createElement(C.a,{src:o,fit:"center",width:"auto",height:0,className:Object(k.O)("image-bg")}),r&&w.a.createElement("div",{className:Object(k.O)("message")},r),w.a.createElement("span",{className:Object(k.O)("delete"),onClick:this.handleRemove}),w.a.createElement("div",{className:Object(k.O)("progress-bg")},w.a.createElement(j.a,{className:Object(k.O)("progress"),color:"#f2f2f2",background:"rgba(0,0,0,0.5)",value:t,strokeWidth:2})))}}]),n}(d.PureComponent),N=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).handleRemove=t.handleRemove.bind(Object(c.a)(Object(c.a)(t))),t.handleRecover=t.handleRecover.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"handleRemove",value:function(){this.props.onRemove(this.props.index)}},{key:"handleRecover",value:function(){var e=this.props,t=e.onRecover,n=e.value;t(e.index,n)}},{key:"render",value:function(){var e=this.props,t=e.renderResult,n=e.value,a=e.recoverAble,o=e.showRecover,r=Object(k.O)("view-value",a&&"to-be-delete");return w.a.createElement("div",{className:r},w.a.createElement("div",{className:Object(k.O)("text")},t(n)),this.props.onRemove&&w.a.createElement("a",{className:Object(k.O)("delete"),onClick:this.handleRemove},x.a.Close),o&&w.a.createElement("a",{className:Object(k.O)("recover"),onClick:this.handleRecover},x.a.Recovery))}}]),n}(d.PureComponent);N.defaultProps={renderResult:function(e){return e},recoverAble:!1};var F=N,A=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).handleRemove=t.handleRemove.bind(Object(c.a)(Object(c.a)(t))),t.handleRecover=t.handleRecover.bind(Object(c.a)(Object(c.a)(t))),t.bindImage=t.bindImage.bind(Object(c.a)(Object(c.a)(t))),t.handlePreview=t.handlePreview.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"bindImage",value:function(e){this.image=e}},{key:"handleRemove",value:function(){this.props.onRemove(this.props.index)}},{key:"handleRecover",value:function(){var e=this.props,t=e.onRecover,n=e.value;t(e.index,n)}},{key:"handlePreview",value:function(){var e=this.props,t=e.onPreview,n=e.renderResult,a=e.value,o=e.index,r=e.values;t?t(n(a),a,o,r):this.image&&this.image.preview()}},{key:"renderOptions",value:function(){return w.a.createElement("div",{className:Object(k.O)("image-options")},w.a.createElement("a",{className:Object(k.O)("options-item"),onClick:this.handlePreview},x.a.Preview),this.props.onRemove&&w.a.createElement("a",{className:Object(k.O)("options-item"),onClick:this.handleRemove},x.a.Delete))}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.renderResult,a=e.recoverAble,o=e.renderContent,r=e.style,i=e.showRecover,l=e.index,s=e.values,c=Object(k.O)("image-item","image-result",a&&"to-be-delete"),u=n(t);return w.a.createElement("div",{style:r,className:c},u&&(o?o(u,t,l,s):w.a.createElement(C.a,{ref:this.bindImage,src:u,href:u,fit:"center",width:"auto",height:0,className:Object(k.O)("image-bg")})),i&&w.a.createElement("a",{className:Object(k.O)("recover"),onClick:this.handleRecover},x.a.Recovery),this.showRemove&&w.a.createElement("span",{className:Object(k.O)("delete"),onClick:this.handleRemove}),!o&&this.renderOptions())}},{key:"showRemove",get:function(){var e=this.props,t=e.onRemove,n=e.renderContent;return t&&n}}]),n}(d.PureComponent);A.defaultProps={renderResult:function(e){return e}};var D=A,I=n(29),z=n.n(I)()(),P=z.Provider,T=n(172),B=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).state={drop:!1},t.handleDrag=t.handleDrag.bind(Object(c.a)(Object(c.a)(t))),t.handleFileDrop=t.handleFileDrop.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"handleFileDrop",value:function(e){var t=e.dataTransfer.files,n=this.props,a=n.accept,o=n.multiple,r=n.onDrop,i=n.dropData,l=a?Array.prototype.filter.call(t,function(e){return Object(T.a)(e,a)}):t;l&&0!==l.length&&r&&r(o?l:[l[0]],i)}},{key:"handleDrag",value:function(e){this.props.disabled||(e.preventDefault(),e.stopPropagation(),this.setState({drop:"dragover"===e.type}),"drop"===e.type&&this.handleFileDrop(e))}},{key:"render",value:function(){var e=this.state.drop,t=this.props,n=t.children,a=t.className;return this.props.drop?w.a.createElement("span",{className:E()(a,Object(k.O)(e&&"drop")),onDragOver:this.handleDrag,onDragLeave:this.handleDrag,onDrop:this.handleDrag},n):n}}]),n}(w.a.Component);B.defaultProps={drop:!1};var L=n(32),H=n(75),q=[{key:"size",param:function(e){return e.size}},{key:"ext",param:function(e){var t=e.name.split(".");return t[t.length-1]}},{key:"customValidator",param:function(e){return e}}],M=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).state={files:{},recycle:[]},t.addFile=t.addFile.bind(Object(c.a)(Object(c.a)(t))),t.bindElement=t.bindElement.bind(Object(c.a)(Object(c.a)(t))),t.handleAddClick=t.handleAddClick.bind(Object(c.a)(Object(c.a)(t))),t.removeFile=t.removeFile.bind(Object(c.a)(Object(c.a)(t))),t.removeValue=t.removeValue.bind(Object(c.a)(Object(c.a)(t))),t.recoverValue=t.recoverValue.bind(Object(c.a)(Object(c.a)(t))),t.validatorHandle=t.validatorHandle.bind(Object(c.a)(Object(c.a)(t))),t.useValidator=t.useValidator.bind(Object(c.a)(Object(c.a)(t))),t.handleFileDrop=t.handleFileDrop.bind(Object(c.a)(Object(c.a)(t))),t.handleReplace=t.handleReplace.bind(Object(c.a)(Object(c.a)(t))),e.validateHook(t.validate.bind(Object(c.a)(Object(c.a)(t)))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"getAction",value:function(e){var t=this.props.action;return"string"==typeof t?t:"function"==typeof t?t(e):""}},{key:"validatorHandle",value:function(e,t){var n=this.props.validatorHandle;return"function"==typeof n?n(e,t):n}},{key:"bindElement",value:function(e){this.input=e}},{key:"handleAddClick",value:function(){this.props.disabled||this.input.click()}},{key:"validate",value:function(){var n=this.state.files;return new Promise(function(e,t){0<Object.keys(n).length&&t(new f.a("")),e(!0)})}},{key:"removeFile",value:function(t){var e=this.props.onErrorRemove,n=this.state.files[t];n&&(n.xhr&&n.xhr.abort&&n.xhr.abort(),this.setState(Object(g.a)(function(e){delete e.files[t]}),function(){3===n.status&&e&&e(n.xhr,n.blob,n)}))}},{key:"removeValue",value:function(t){var n=this,e=this.props,a=e.recoverAble;if(!e.disabled){this.setState(Object(g.a)(function(e){e.recycle.push(n.props.value[t]),"number"==typeof a&&e.recycle.length>a&&e.recycle.shift()}));var o=Object(g.a)(this.props.value,function(e){e.splice(t,1)});this.props.onChange(o)}}},{key:"recoverValue",value:function(t,n){this.props.disabled||(this.props.onChange(Object(g.a)(this.props.value,function(e){e.push(n)})),this.setState(Object(g.a)(function(e){e.recycle.splice(t,1)})))}},{key:"useValidator",value:function(e){var t=this.props,n=t.validator,a=t.accept,o=t.forceAccept,r=this.state.files,i=null,l=0;if(o&&!Object(T.a)(e,a))return new Error(Object(L.a)("invalidAccept"));for(;q[l];){var s=q[l];if("function"==typeof n[s.key]&&(i=n[s.key](s.param(e),r))instanceof Error)return i;l+=1}return null}},{key:"addFile",value:function(e){var i=this,t=this.props,l=t.beforeUpload,n=t.value,a=t.limit,o=t.filesFilter,s=Object(u.a)({},this.state.files),c=e.fromDragger&&e.files?e.files:e.target.files;o&&(c=o(Array.from(c)));var r=a-n.length-Object.keys(this.state.files).length;r<=0||(Array.from({length:Math.min(c.length,r)}).forEach(function(e,t){var n=c[t],a=Object(h.c)(),o={name:n.name,process:-1,status:1,blob:n};s[a]=o;var r=i.useValidator(n);if(r instanceof Error)return i.validatorHandle(r,o.blob)?(o.message=r.message,o.status=3,void(l&&l(n,i.validatorHandle).then(function(t){i.setState(Object(g.a)(function(e){e.files[a]=Object.assign({},e.files[a],t)}))}).catch(function(){return!0}))):void delete s[a];l?l(n,i.validatorHandle).then(function(t){3!==t.status&&(s[a].xhr=i.uploadFile(a,n,t.data)),i.setState(Object(g.a)(function(e){e.files[a]=Object.assign({},e.files[a],t)}))}).catch(function(){i.setState(Object(g.a)(function(e){delete e.files[a]}))}):s[a].xhr=i.uploadFile(a,n)}),this.setState({files:s}))}},{key:"uploadFile",value:function(a,o,r){var i=this,e=this.props,l=e.onSuccess,t=e.name,n=e.htmlName,s=e.cors,c=e.params,u=e.withCredentials,d=e.headers,p=e.request,m=e.onProgress,h=e.onStart,f=p||y,v=!1,b={url:this.getAction(o),name:n||t,cors:s,params:c,withCredentials:u,file:o,headers:d,onStart:h,onProgress:function(e,t){var n="number"==typeof e.percent?e.percent:e.loaded/e.total*100;v||(v=!0,setTimeout(function(){v=!1},16),i.state.files[a]&&i.setState(Object(g.a)(function(e){e.files[a].process=n,t&&(e.files[a].message=t)}),function(){"function"==typeof m&&m(i.state.files[a])}))},onSuccess:l,onLoad:function(e){var t;if(/^2|1223/.test(e.status))if("text"!==e.responseType&&e.responseType||(t=e.responseText),t||(t=e.response),l&&(t=l(t,o,r,e)),t instanceof Error)i.setState(Object(g.a)(function(e){e.files[a].status=3,e.files[a].name=o.name,e.files[a].message=t.message}));else{i.setState(Object(g.a)(function(e){delete e.files[a]}));var n=Object(g.a)(i.props.value,function(e){e.push(t)});i.props.onChange(n)}else i.handleError(a,e,o)},onError:function(e){return i.handleError(a,e,o)}};return!1!==m&&null!==m||delete b.onProgress,f(b)}},{key:"handleFileDrop",value:function(e){this.addFile({files:e,fromDragger:!0})}},{key:"handleReplace",value:function(e,t){var n=this;this.removeValue(t),setTimeout(function(){n.addFile({files:e,fromDragger:!0})})}},{key:"handleError",value:function(t,e,n){var a=this.props,o=a.onError,r=a.onHttpError,i=e.statusText;o&&(i=o(e,n)),r&&(i=r(e,n)||i),this.setState(Object(g.a)(function(e){e.files[t].status=3,e.files[t].message=i}))}},{key:"renderHandle",value:function(){var e=this.props,t=e.limit,n=e.value,a=e.children,o=e.accept,r=e.multiple,i=e.disabled,l=e.webkitdirectory,s=e.drop,c=n.length+Object.keys(this.state.files).length;if(0<t&&t<=c)return null;var u={multiple:r,addFile:this.addFile,accept:o,disabled:i,limit:t};return w.a.createElement(B,{drop:s,accept:o,disabled:i,onDrop:this.handleFileDrop,multiple:r||1<t},w.a.createElement("span",{className:Object(k.O)("handle"),onClick:this.handleAddClick},w.a.createElement(P,{value:u},a),w.a.createElement(b,{webkitdirectory:l,accept:o,ref:this.bindElement,multiple:r,onChange:this.addFile})))}},{key:"render",value:function(){var n=this,e=this.props,a=e.limit,o=e.value,r=e.renderResult,t=e.style,i=e.imageStyle,l=e.recoverAble,s=e.showUploadList,c=e.customResult,u=e.disabled,d=e.renderContent,p=e.accept,m=e.drop,h=e.leftHandler,f=e.onPreview,v=this.state,b=v.files,g=v.recycle,y=E()(Object(k.O)("_",u&&"disabled",!1===s&&"hide-list"),this.props.className),j=i?U:S,O=i?D:F;return c?w.a.createElement("div",{className:y,style:t},this.renderHandle(),w.a.createElement(c,{value:o,files:b,onValueRemove:this.removeValue,onFileRemove:this.removeFile})):w.a.createElement("div",Object.assign({className:y,style:t},Object(H.a)(this.props)),!i&&this.renderHandle(),i&&h&&this.renderHandle(),s&&o.map(function(e,t){return w.a.createElement(B,{drop:m,multiple:!1,key:t,accept:p,dropData:t,disabled:u,onDrop:n.handleReplace},w.a.createElement(O,{renderContent:d,value:e,values:o,index:t,style:i,renderResult:r,onRemove:n.removeValue,onPreview:f}))}),s&&Object.keys(b).map(function(e){return w.a.createElement(j,Object.assign({},b[e],{key:e,id:e,style:i,onRemove:n.removeFile}))}),i&&!h&&this.renderHandle(),l&&g.map(function(e,t){return w.a.createElement(O,{renderContent:d,key:t,value:e,values:g,index:t,renderResult:r,recoverAble:!!l,showRecover:l&&a>o.length,onRecover:n.recoverValue,style:i})}))}}]),n}(m.b);M.defaultProps={cors:!1,limit:100,recoverAble:!1,validator:{},value:[],withCredentials:!1,showUploadList:!0,validatorHandle:!0};var V,W=(V=M,function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.forceAccept,n=e.accept;return w.a.createElement(V,Object.assign({},this.props,{accept:t||n,forceAccept:!!t}))}}]),t}(w.a.PureComponent)),X=n(13),K=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).beforeUpload=t.beforeUpload.bind(Object(c.a)(Object(c.a)(t))),t.handleMouseDown=t.handleMouseDown.bind(Object(c.a)(Object(c.a)(t))),t.handleKeyDown=t.handleKeyDown.bind(Object(c.a)(Object(c.a)(t))),t.state={urlInvalid:!1},t.timeout=null,t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"beforeUpload",value:function(l,s){var c=this;return new Promise(function(a,o){var r=c.props.validator.imageSize,i={},e=new FileReader;e.onload=function(e){var t=e.target.result;i.data=t;var n=new window.Image;n.onerror=function(){c.setState(Object(g.a)(function(e){e.urlInvalid=!0})),o()},n.onload=function(){if(r){var e=r(n);e instanceof Error&&(s(e,l)||o(),i.status=3,i.message=e.message),a(i)}else a(i)},n.src=t},e.readAsDataURL(l)})}},{key:"handleKeyDown",value:function(e){this.setState({urlInvalid:!1}),13===e.keyCode&&e.target.click()}},{key:"handleMouseDown",value:function(){this.setState({urlInvalid:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.width,o=t.height,r=t.ignorePreview,i=Object(X.a)(t,["children","width","height","ignorePreview"]),l=this.state.urlInvalid;l&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.setState({urlInvalid:!1})},3e3));var s={width:a,height:o},c=n||w.a.createElement("div",{className:Object(k.O)("indicator",l&&"url-invalid-indicator")});return w.a.createElement(W,Object.assign({},i,{imageStyle:s,beforeUpload:r?void 0:this.beforeUpload}),w.a.createElement("div",{tabIndex:this.props.disabled?-1:0,style:s,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,className:Object(k.O)("image-plus","image-item",i.disabled&&"disabled",l&&"url-invalid-border")},c),l&&w.a.createElement("div",{style:{width:"100%",position:"relative"}},w.a.createElement("div",{className:Object(k.O)("url-invalid-message")},Object(L.a)("urlInvalidMsg"))))}}]),n}(d.PureComponent);K.defaultProps={accept:"image/*",height:80,validator:{},width:80};var _=K,J=function(e){13===e.keyCode&&e.target.click()},G=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).state={progress:-1},t.handleError=t.handleError.bind(Object(c.a)(Object(c.a)(t))),t.handleSuccess=t.handleSuccess.bind(Object(c.a)(Object(c.a)(t))),t.handleProgress=t.handleProgress.bind(Object(c.a)(Object(c.a)(t))),t.handleStart=t.handleChange.bind(Object(c.a)(Object(c.a)(t)),0),t.handleOver=t.handleChange.bind(Object(c.a)(Object(c.a)(t)),-1),t.handleUpload=t.handleUpload.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"handleChange",value:function(e){this.setState({progress:e})}},{key:"handleProgress",value:function(e){this.handleChange(e.process)}},{key:"handleError",value:function(e){var t=this.props.onError;t&&t(e),this.handleOver()}},{key:"handleSuccess",value:function(){var e=this.props.onSuccess;e&&e.apply(void 0,arguments),this.handleOver()}},{key:"handleUpload",value:function(e){0<=this.state.progress&&e.stopPropagation()}},{key:"renderLoadingView",value:function(e){var t,n=this.props,a=n.placeholder,o=n.loading;return Object(d.isValidElement)(o)?w.a.createElement("span",null,o):w.a.createElement("span",null,(t=e,w.a.createElement("span",{style:{display:"inline-block",marginRight:8}},w.a.createElement(O.a,{size:10,name:"ring",color:t}))),"string"==typeof o?o:a)}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.type,a=Object(X.a)(e,["placeholder","type"]),o=0<=this.state.progress,r=E()(Object(k.O)("bprogress",a.disabled&&"disabled"),o?Object(k.O)("uploading","border-".concat(n)):Object(k.O)("bprogress-".concat(n))),i={right:o?"".concat(100-this.state.progress,"%"):"100%"};return w.a.createElement(W,Object.assign({},a,{limit:void 0,onProgress:this.handleProgress,onStart:this.handleStart,showUploadList:!1,onError:this.handleError,onSuccess:this.handleSuccess}),w.a.createElement("div",{tabIndex:this.props.disabled?-1:0,className:r,onClick:this.handleUpload,onKeyDown:J},o&&w.a.createElement("div",{style:i,className:Object(k.O)("bprogress-".concat(n),"stream")},this.renderLoadingView("#fff")),w.a.createElement("span",null,o?this.renderLoadingView():t)))}}]),n}(m.b);G.defaultProps={type:"primary"};var Z,$=G,Y=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(i.a)(this,Object(l.a)(n).call(this,e))).handleDrop=t.handleDrop.bind(Object(c.a)(Object(c.a)(t))),t}return Object(s.a)(n,e),Object(r.a)(n,[{key:"getMatchedFile",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.props.accept;return Array.prototype.slice.call(e).filter(function(e){return Object(T.a)(e,t)})}},{key:"handleDrop",value:function(e){(0,this.props.addFile)({files:e,fromDragger:!0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disabled,a=e.multiple,o=e.limit,r=e.accept;return w.a.createElement(B,{className:Object(k.O)("dragger-wrapper"),drop:!0,disabled:n,multiple:a||1<o,accept:r,onDrop:this.handleDrop},w.a.createElement("div",{className:Object(k.O)("dragger-area",n&&"disabled")},t))}}]),n}(m.b),Q=Object(a.a)(W);Q.Image=Object(a.a)(_),Q.Button=Object(a.a)($),Q.Dragger=(Z=Y,function(t){return w.a.createElement(z.Consumer,null,function(e){return w.a.createElement(Z,Object.assign({},t,e))})}),Q.displayName="ShineoutUpload",Q.Image.displayName="ShineoutImageUpload",Q.Button.displayName="ShineoutButtonUpload",Q.Dragger.displayName="ShineoutDraggerUpload";t.a=Q}}]);